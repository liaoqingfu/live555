<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="3704px" preserveAspectRatio="none" style="width:2455px;height:3704px;" version="1.1" viewBox="0 0 2455 3704" width="2455px" zoomAndPan="magnify"><defs><filter height="300%" id="f1sk7k77inbo74" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--class Medium--><rect fill="#FEFECE" filter="url(#f1sk7k77inbo74)" height="348.459" id="Medium" style="stroke: #A80036; stroke-width: 1.5;" width="544" x="1470" y="8"/><ellipse cx="1715.75" cy="24" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1714.3281,29.3594 Q1712.4688,29.3594 1711.375,27.9688 Q1710.2813,26.5781 1710.2813,23.5938 Q1710.2813,21.0625 1711.4453,19.4063 Q1712.6094,17.75 1714.5938,17.75 Q1716.0625,17.75 1716.5313,17.875 Q1717,18.0781 1717,18.0781 Q1717,18.0781 1717,18.0078 Q1717,17.9375 1717.6094,17.0156 L1718.6563,20.6719 L1717.3281,21.0781 Q1716.8594,19.5313 1716.1953,18.8672 Q1715.5313,18.2031 1714.4688,18.2031 Q1714.0781,18.2031 1713.3125,19.7344 Q1712.5469,21.2656 1712.5469,23.5156 Q1712.5469,25.9844 1713.2109,27.375 Q1713.875,28.7656 1714.4063,28.7656 Q1715.4688,28.7656 1716.2266,28 Q1716.9844,27.2344 1717.3281,25.5781 L1718.6563,26.1719 Q1718.3281,27.5781 1717.4297,28.4688 Q1716.5313,29.3594 1714.3281,29.3594 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="44" x="1736.25" y="29.5576">Medium</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1471" x2="2013" y1="40" y2="40"/><polygon fill="none" points="1481,48.0115,1485,52.0115,1481,56.0115,1477,52.0115" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="152" x="1490" y="56.606">friend class MediaLookupTable;</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1478" y="65.0344"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="143" x="1490" y="71.6289">UsageEnvironment&amp; fEnviron;</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1478" y="80.0574"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="202" x="1490" y="86.6519">char fMediumName[mediumNameMaxLen];</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1478" y="95.0803"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="107" x="1490" y="101.6748">TaskToken fNextTask;</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1471" x2="2013" y1="108.0918" y2="108.0918"/><ellipse cx="1481" cy="121.1033" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="518" x="1490" y="124.6978">static Boolean lookupByName(UsageEnvironment&amp; env, char const* mediumName, Medium*&amp; resultMedium);</text><ellipse cx="1481" cy="136.1262" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="335" x="1490" y="139.7207">static void close(UsageEnvironment&amp; env, char const* mediumName);</text><ellipse cx="1481" cy="151.1492" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="356" x="1490" y="154.7437">static void close(Medium* medium); // alternative close() method using ptrs</text><ellipse cx="1481" cy="166.1721" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="254" x="1490" y="169.7666">UsageEnvironment&amp; envir() const { return fEnviron; }</text><ellipse cx="1481" cy="181.1951" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="242" x="1490" y="184.7896">char const* name() const { return fMediumName; }</text><ellipse cx="1481" cy="196.218" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="158" x="1490" y="199.8125">virtual Boolean isSource() const;</text><ellipse cx="1481" cy="211.241" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="143" x="1490" y="214.8354">virtual Boolean isSink() const;</text><ellipse cx="1481" cy="226.2639" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="190" x="1490" y="229.8584">virtual Boolean isRTCPInstance() const;</text><ellipse cx="1481" cy="241.2869" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="175" x="1490" y="244.8813">virtual Boolean isRTSPClient() const;</text><ellipse cx="1481" cy="256.3098" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="182" x="1490" y="259.9043">virtual Boolean isRTSPServer() const;</text><ellipse cx="1481" cy="271.3328" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="190" x="1490" y="274.9272">virtual Boolean isMediaSession() const;</text><ellipse cx="1481" cy="286.3557" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="223" x="1490" y="289.9502">virtual Boolean isServerMediaSession() const;</text><ellipse cx="1481" cy="301.3787" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="193" x="1490" y="304.9731">virtual Boolean isDarwinInjector() const;</text><polygon fill="#FFFF44" points="1481,311.4016,1485,315.4016,1481,319.4016,1477,315.4016" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="165" x="1490" y="319.9961">Medium(UsageEnvironment&amp; env);</text><polygon fill="#FFFF44" points="1481,326.4246,1485,330.4246,1481,334.4246,1477,330.4246" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="85" x="1490" y="335.019">virtual ~Medium();</text><polygon fill="#FFFF44" points="1481,341.4475,1485,345.4475,1481,349.4475,1477,345.4475" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="117" x="1490" y="350.042">TaskToken&amp; nextTask();</text><!--class GenericMediaServer--><rect fill="#FEFECE" filter="url(#f1sk7k77inbo74)" height="378.5049" id="GenericMediaServer" style="stroke: #A80036; stroke-width: 1.5;" width="491" x="1496.5" y="416"/><ellipse cx="1682.25" cy="432" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1680.8281,437.3594 Q1678.9688,437.3594 1677.875,435.9688 Q1676.7813,434.5781 1676.7813,431.5938 Q1676.7813,429.0625 1677.9453,427.4063 Q1679.1094,425.75 1681.0938,425.75 Q1682.5625,425.75 1683.0313,425.875 Q1683.5,426.0781 1683.5,426.0781 Q1683.5,426.0781 1683.5,426.0078 Q1683.5,425.9375 1684.1094,425.0156 L1685.1563,428.6719 L1683.8281,429.0781 Q1683.3594,427.5313 1682.6953,426.8672 Q1682.0313,426.2031 1680.9688,426.2031 Q1680.5781,426.2031 1679.8125,427.7344 Q1679.0469,429.2656 1679.0469,431.5156 Q1679.0469,433.9844 1679.7109,435.375 Q1680.375,436.7656 1680.9063,436.7656 Q1681.9688,436.7656 1682.7266,436 Q1683.4844,435.2344 1683.8281,433.5781 L1685.1563,434.1719 Q1684.8281,435.5781 1683.9297,436.4688 Q1683.0313,437.3594 1680.8281,437.3594 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="111" x="1702.75" y="437.5576">GenericMediaServer</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1497.5" x2="1986.5" y1="448" y2="448"/><ellipse cx="1507.5" cy="461.0115" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="136" x="1516.5" y="464.606">virtual ServerMediaSession*</text><polygon fill="none" points="1507.5,471.0344,1511.5,475.0344,1507.5,479.0344,1503.5,475.0344" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="116" x="1516.5" y="479.6289">virtual ClientConnection*</text><polygon fill="none" points="1507.5,486.0574,1511.5,490.0574,1507.5,494.0574,1503.5,490.0574" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="87" x="1516.5" y="494.6519">int fServerSocket;</text><polygon fill="none" points="1507.5,501.0803,1511.5,505.0803,1507.5,509.0803,1503.5,505.0803" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="81" x="1516.5" y="509.6748">Port fServerPort;</text><polygon fill="none" points="1507.5,516.1033,1511.5,520.1033,1507.5,524.1033,1503.5,520.1033" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="171" x="1516.5" y="524.6978">HashTable* fServerMediaSessions;</text><polygon fill="none" points="1507.5,531.1262,1511.5,535.1262,1507.5,539.1262,1503.5,535.1262" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="151" x="1516.5" y="539.7207">HashTable* fClientConnections;</text><polygon fill="none" points="1507.5,546.1492,1511.5,550.1492,1507.5,554.1492,1503.5,550.1492" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="136" x="1516.5" y="554.7437">HashTable* fClientSessions;</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1497.5" x2="1986.5" y1="561.1606" y2="561.1606"/><ellipse cx="1507.5" cy="574.1721" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="358" x="1516.5" y="577.7666">void addServerMediaSession(ServerMediaSession* serverMediaSession);</text><ellipse cx="1507.5" cy="589.1951" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="454" x="1516.5" y="592.7896">lookupServerMediaSession(char const* streamName, Boolean isFirstLookupInSession = True);</text><ellipse cx="1507.5" cy="604.218" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="376" x="1516.5" y="607.8125">void removeServerMediaSession(ServerMediaSession* serverMediaSession);</text><ellipse cx="1507.5" cy="619.241" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="289" x="1516.5" y="622.8354">void removeServerMediaSession(char const* streamName);</text><ellipse cx="1507.5" cy="634.2639" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="465" x="1516.5" y="637.8584">void closeAllClientSessionsForServerMediaSession(ServerMediaSession* serverMediaSession);</text><ellipse cx="1507.5" cy="649.2869" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="378" x="1516.5" y="652.8813">void closeAllClientSessionsForServerMediaSession(char const* streamName);</text><ellipse cx="1507.5" cy="664.3098" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="369" x="1516.5" y="667.9043">void deleteServerMediaSession(ServerMediaSession* serverMediaSession);</text><ellipse cx="1507.5" cy="679.3328" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="282" x="1516.5" y="682.9272">void deleteServerMediaSession(char const* streamName);</text><polygon fill="#FFFF44" points="1507.5,689.3557,1511.5,693.3557,1507.5,697.3557,1503.5,693.3557" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="360" x="1516.5" y="697.9502">GenericMediaServer(UsageEnvironment&amp; env, int ourSocket, Port ourPort);</text><polygon fill="#FFFF44" points="1507.5,704.3787,1511.5,708.3787,1507.5,712.3787,1503.5,708.3787" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="148" x="1516.5" y="712.9731">virtual ~GenericMediaServer();</text><polygon fill="#FFFF44" points="1507.5,719.4016,1511.5,723.4016,1507.5,727.4016,1503.5,723.4016" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="321" x="1516.5" y="727.9961">static int setUpOurSocket(UsageEnvironment&amp; env, Port&amp; ourPort);</text><polygon fill="#FFFF44" points="1507.5,734.4246,1511.5,738.4246,1507.5,742.4246,1503.5,738.4246" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="279" x="1516.5" y="743.019">static void incomingConnectionHandler(void*, int /*mask*/);</text><polygon fill="#FFFF44" points="1507.5,749.4475,1511.5,753.4475,1507.5,757.4475,1503.5,753.4475" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="167" x="1516.5" y="758.042">void incomingConnectionHandler();</text><polygon fill="#FFFF44" points="1507.5,764.4705,1511.5,768.4705,1507.5,772.4705,1503.5,768.4705" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="293" x="1516.5" y="773.0649">void incomingConnectionHandlerOnSocket(int serverSocket);</text><polygon fill="#FFFF44" points="1507.5,779.4934,1511.5,783.4934,1507.5,787.4934,1503.5,783.4934" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="383" x="1516.5" y="788.0879">createNewClientConnection(int clientSocket, struct sockaddr_in clientAddr) = 0;</text><!--class ClientConnection--><rect fill="#FEFECE" filter="url(#f1sk7k77inbo74)" height="273.3442" id="ClientConnection" style="stroke: #A80036; stroke-width: 1.5;" width="501" x="1187.5" y="855"/><ellipse cx="1386.25" cy="871" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1384.8281,876.3594 Q1382.9688,876.3594 1381.875,874.9688 Q1380.7813,873.5781 1380.7813,870.5938 Q1380.7813,868.0625 1381.9453,866.4063 Q1383.1094,864.75 1385.0938,864.75 Q1386.5625,864.75 1387.0313,864.875 Q1387.5,865.0781 1387.5,865.0781 Q1387.5,865.0781 1387.5,865.0078 Q1387.5,864.9375 1388.1094,864.0156 L1389.1563,867.6719 L1387.8281,868.0781 Q1387.3594,866.5313 1386.6953,865.8672 Q1386.0313,865.2031 1384.9688,865.2031 Q1384.5781,865.2031 1383.8125,866.7344 Q1383.0469,868.2656 1383.0469,870.5156 Q1383.0469,872.9844 1383.7109,874.375 Q1384.375,875.7656 1384.9063,875.7656 Q1385.9688,875.7656 1386.7266,875 Q1387.4844,874.2344 1387.8281,872.5781 L1389.1563,873.1719 Q1388.8281,874.5781 1387.9297,875.4688 Q1387.0313,876.3594 1384.8281,876.3594 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="95" x="1406.75" y="876.5576">ClientConnection</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1188.5" x2="1687.5" y1="887" y2="887"/><polygon fill="none" points="1198.5,895.0115,1202.5,899.0115,1198.5,903.0115,1194.5,899.0115" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="162" x="1207.5" y="903.606">friend class GenericMediaServer;</text><polygon fill="none" points="1198.5,910.0344,1202.5,914.0344,1198.5,918.0344,1194.5,914.0344" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="167" x="1207.5" y="918.6289">GenericMediaServer&amp; fOurServer;</text><polygon fill="none" points="1198.5,925.0574,1202.5,929.0574,1198.5,933.0574,1194.5,929.0574" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="72" x="1207.5" y="933.6519">int fOurSocket;</text><polygon fill="none" points="1198.5,940.0803,1202.5,944.0803,1198.5,948.0803,1194.5,944.0803" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="150" x="1207.5" y="948.6748">struct sockaddr_in fClientAddr;</text><polygon fill="none" points="1198.5,955.1033,1202.5,959.1033,1198.5,963.1033,1194.5,959.1033" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="276" x="1207.5" y="963.6978">unsigned char fRequestBuffer[REQUEST_BUFFER_SIZE];</text><polygon fill="none" points="1198.5,970.1262,1202.5,974.1262,1198.5,978.1262,1194.5,974.1262" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="292" x="1207.5" y="978.7207">unsigned char fResponseBuffer[RESPONSE_BUFFER_SIZE];</text><polygon fill="none" points="1198.5,985.1492,1202.5,989.1492,1198.5,993.1492,1194.5,989.1492" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="313" x="1207.5" y="993.7437">unsigned fRequestBytesAlreadySeen, fRequestBufferBytesLeft;</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1188.5" x2="1687.5" y1="1000.1606" y2="1000.1606"/><polygon fill="#FFFF44" points="1198.5,1008.1721,1202.5,1012.1721,1198.5,1016.1721,1194.5,1012.1721" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="475" x="1207.5" y="1016.7666">ClientConnection(GenericMediaServer&amp; ourServer, int clientSocket, struct sockaddr_in clientAddr);</text><polygon fill="#FFFF44" points="1198.5,1023.1951,1202.5,1027.1951,1198.5,1031.1951,1194.5,1027.1951" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="129" x="1207.5" y="1031.7896">virtual ~ClientConnection();</text><polygon fill="#FFFF44" points="1198.5,1038.218,1202.5,1042.218,1198.5,1046.218,1194.5,1042.218" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="274" x="1207.5" y="1046.8125">UsageEnvironment&amp; envir() { return fOurServer.envir(); }</text><polygon fill="#FFFF44" points="1198.5,1053.241,1202.5,1057.241,1198.5,1061.241,1194.5,1057.241" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="99" x="1207.5" y="1061.8354">void closeSockets();</text><polygon fill="#FFFF44" points="1198.5,1068.2639,1202.5,1072.2639,1198.5,1076.2639,1194.5,1072.2639" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="265" x="1207.5" y="1076.8584">static void incomingRequestHandler(void*, int /*mask*/);</text><polygon fill="#FFFF44" points="1198.5,1083.2869,1202.5,1087.2869,1198.5,1091.2869,1194.5,1087.2869" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="153" x="1207.5" y="1091.8813">void incomingRequestHandler();</text><polygon fill="#FFFF44" points="1198.5,1098.3098,1202.5,1102.3098,1198.5,1106.3098,1194.5,1102.3098" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="273" x="1207.5" y="1106.9043">virtual void handleRequestBytes(int newBytesRead) = 0;</text><polygon fill="#FFFF44" points="1198.5,1113.3328,1202.5,1117.3328,1198.5,1121.3328,1194.5,1117.3328" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="130" x="1207.5" y="1121.9272">void resetRequestBuffer();</text><!--class ClientSession--><rect fill="#FEFECE" filter="url(#f1sk7k77inbo74)" height="153.1606" id="ClientSession" style="stroke: #A80036; stroke-width: 1.5;" width="359" x="1795.5" y="915"/><ellipse cx="1931.75" cy="931" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1930.3281,936.3594 Q1928.4688,936.3594 1927.375,934.9688 Q1926.2813,933.5781 1926.2813,930.5938 Q1926.2813,928.0625 1927.4453,926.4063 Q1928.6094,924.75 1930.5938,924.75 Q1932.0625,924.75 1932.5313,924.875 Q1933,925.0781 1933,925.0781 Q1933,925.0781 1933,925.0078 Q1933,924.9375 1933.6094,924.0156 L1934.6563,927.6719 L1933.3281,928.0781 Q1932.8594,926.5313 1932.1953,925.8672 Q1931.5313,925.2031 1930.4688,925.2031 Q1930.0781,925.2031 1929.3125,926.7344 Q1928.5469,928.2656 1928.5469,930.5156 Q1928.5469,932.9844 1929.2109,934.375 Q1929.875,935.7656 1930.4063,935.7656 Q1931.4688,935.7656 1932.2266,935 Q1932.9844,934.2344 1933.3281,932.5781 L1934.6563,933.1719 Q1934.3281,934.5781 1933.4297,935.4688 Q1932.5313,936.3594 1930.3281,936.3594 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="78" x="1952.25" y="936.5576">ClientSession</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1796.5" x2="2153.5" y1="947" y2="947"/><polygon fill="none" points="1806.5,955.0115,1810.5,959.0115,1806.5,963.0115,1802.5,959.0115" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="162" x="1815.5" y="963.606">friend class GenericMediaServer;</text><polygon fill="none" points="1806.5,970.0344,1810.5,974.0344,1806.5,978.0344,1802.5,974.0344" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="167" x="1815.5" y="978.6289">GenericMediaServer&amp; fOurServer;</text><polygon fill="none" points="1806.5,985.0574,1810.5,989.0574,1806.5,993.0574,1802.5,989.0574" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="119" x="1815.5" y="993.6519">u_int32_t fOurSessionId;</text><polygon fill="none" points="1806.5,1000.0803,1810.5,1004.0803,1806.5,1008.0803,1802.5,1004.0803" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="232" x="1815.5" y="1008.6748">ServerMediaSession* fOurServerMediaSession;</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1796.5" x2="2153.5" y1="1015.0918" y2="1015.0918"/><ellipse cx="1806.5" cy="1028.1033" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="333" x="1815.5" y="1031.6978">ClientSession(GenericMediaServer&amp; ourServer, u_int32_t sessionId);</text><ellipse cx="1806.5" cy="1043.1262" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="114" x="1815.5" y="1046.7207">virtual ~ClientSession();</text><ellipse cx="1806.5" cy="1058.1492" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="274" x="1815.5" y="1061.7437">UsageEnvironment&amp; envir() { return fOurServer.envir(); }</text><!--class RTSPServer--><rect fill="#FEFECE" filter="url(#f1sk7k77inbo74)" height="844.2163" id="RTSPServer" style="stroke: #A80036; stroke-width: 1.5;" width="631" x="1358.5" y="2002"/><ellipse cx="1636.25" cy="2018" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1634.8281,2023.3594 Q1632.9688,2023.3594 1631.875,2021.9688 Q1630.7813,2020.5781 1630.7813,2017.5938 Q1630.7813,2015.0625 1631.9453,2013.4063 Q1633.1094,2011.75 1635.0938,2011.75 Q1636.5625,2011.75 1637.0313,2011.875 Q1637.5,2012.0781 1637.5,2012.0781 Q1637.5,2012.0781 1637.5,2012.0078 Q1637.5,2011.9375 1638.1094,2011.0156 L1639.1563,2014.6719 L1637.8281,2015.0781 Q1637.3594,2013.5313 1636.6953,2012.8672 Q1636.0313,2012.2031 1634.9688,2012.2031 Q1634.5781,2012.2031 1633.8125,2013.7344 Q1633.0469,2015.2656 1633.0469,2017.5156 Q1633.0469,2019.9844 1633.7109,2021.375 Q1634.375,2022.7656 1634.9063,2022.7656 Q1635.9688,2022.7656 1636.7266,2022 Q1637.4844,2021.2344 1637.8281,2019.5781 L1639.1563,2020.1719 Q1638.8281,2021.5781 1637.9297,2022.4688 Q1637.0313,2023.3594 1634.8281,2023.3594 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="67" x="1656.75" y="2023.5576">RTSPServer</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1359.5" x2="1988.5" y1="2034" y2="2034"/><ellipse cx="1369.5" cy="2047.0115" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="253" x="1378.5" y="2050.606">UserAuthenticationDatabase* authDatabase = NULL,</text><ellipse cx="1369.5" cy="2062.0344" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="368" x="1378.5" y="2065.6289">char const* remoteClientNameOrAddress, portNumBits remoteClientPortNum,</text><ellipse cx="1369.5" cy="2077.0574" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="241" x="1378.5" y="2080.6519">responseHandlerForREGISTER* responseHandler,</text><ellipse cx="1369.5" cy="2092.0803" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="301" x="1378.5" y="2095.6748">char const* username = NULL, char const* password = NULL,</text><ellipse cx="1369.5" cy="2107.1033" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="206" x="1378.5" y="2110.6978">Boolean receiveOurStreamViaTCP = False,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="129" x="1378.5" y="2125.7207">int ourSocket, Port ourPort,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="215" x="1378.5" y="2140.7437">UserAuthenticationDatabase* authDatabase,</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1366.5" y="2149.1721"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="169" x="1378.5" y="2155.7666">friend class RTSPClientConnection;</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1366.5" y="2164.1951"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="154" x="1378.5" y="2170.7896">friend class RTSPClientSession;</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1366.5" y="2179.218"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="197" x="1378.5" y="2185.8125">friend class ServerMediaSessionIterator;</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1366.5" y="2194.241"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="178" x="1378.5" y="2200.8354">friend class RegisterRequestRecord;</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1366.5" y="2209.2639"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="112" x="1378.5" y="2215.8584">int fHTTPServerSocket;</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1366.5" y="2224.2869"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="106" x="1378.5" y="2230.8813">Port fHTTPServerPort;</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1366.5" y="2239.3098"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="238" x="1378.5" y="2245.9043">HashTable* fClientConnectionsForHTTPTunneling;</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1366.5" y="2254.3328"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="178" x="1378.5" y="2260.9272">HashTable* fTCPStreamingDatabase;</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1366.5" y="2269.3557"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="189" x="1378.5" y="2275.9502">HashTable* fPendingRegisterRequests;</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1366.5" y="2284.3787"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="172" x="1378.5" y="2290.9731">unsigned fRegisterRequestCounter;</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1366.5" y="2299.4016"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="189" x="1378.5" y="2305.9961">UserAuthenticationDatabase* fAuthDB;</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1366.5" y="2314.4246"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="176" x="1378.5" y="2321.019">unsigned fReclamationTestSeconds;</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1366.5" y="2329.4475"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="187" x="1378.5" y="2336.042">Boolean fAllowStreamingRTPOverTCP;</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1359.5" x2="1988.5" y1="2342.459" y2="2342.459"/><ellipse cx="1369.5" cy="2355.4705" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="367" x="1378.5" y="2359.0649">static RTSPServer* createNew(UsageEnvironment&amp; env, Port ourPort = 554,</text><ellipse cx="1369.5" cy="2370.4934" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="197" x="1378.5" y="2374.0879">unsigned reclamationTestSeconds = 65);</text><ellipse cx="1369.5" cy="2385.5164" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="358" x="1378.5" y="2389.1108">static Boolean lookupByName(UsageEnvironment&amp; env, char const* name,</text><ellipse cx="1369.5" cy="2400.5393" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="140" x="1378.5" y="2404.1338">RTSPServer*&amp; resultServer);</text><ellipse cx="1369.5" cy="2415.5623" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="605" x="1378.5" y="2419.1567">typedef void(responseHandlerForREGISTER)(RTSPServer* rtspServer, unsigned requestId, int resultCode, char* resultString);</text><ellipse cx="1369.5" cy="2430.5852" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="331" x="1378.5" y="2434.1797">unsigned registerStream(ServerMediaSession* serverMediaSession,</text><ellipse cx="1369.5" cy="2445.6082" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="181" x="1378.5" y="2449.2026">char const* proxyURLSuffix = NULL);</text><ellipse cx="1369.5" cy="2460.6311" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="445" x="1378.5" y="2464.2256">char* rtspURL(ServerMediaSession const* serverMediaSession, int clientSocket = -1) const;</text><ellipse cx="1369.5" cy="2475.6541" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="231" x="1378.5" y="2479.2485">char* rtspURLPrefix(int clientSocket = -1) const;</text><ellipse cx="1369.5" cy="2490.677" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="467" x="1378.5" y="2494.2715">UserAuthenticationDatabase* setAuthenticationDatabase(UserAuthenticationDatabase* newDB);</text><ellipse cx="1369.5" cy="2505.7" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="178" x="1378.5" y="2509.2944">void disableStreamingRTPOverTCP();</text><ellipse cx="1369.5" cy="2520.7229" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="235" x="1378.5" y="2524.3174">Boolean setUpTunnelingOverHTTP(Port httpPort);</text><ellipse cx="1369.5" cy="2535.7458" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="424" x="1378.5" y="2539.3403">portNumBits httpServerPortNum() const; // in host byte order.  (Returns 0 if not present.)</text><polygon fill="#FFFF44" points="1369.5,2545.7688,1373.5,2549.7688,1369.5,2553.7688,1365.5,2549.7688" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="184" x="1378.5" y="2554.3633">RTSPServer(UsageEnvironment&amp; env,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="173" x="1378.5" y="2569.3862">unsigned reclamationTestSeconds);</text><polygon fill="#FFFF44" points="1369.5,2575.8147,1373.5,2579.8147,1369.5,2583.8147,1365.5,2579.8147" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="108" x="1378.5" y="2584.4092">virtual ~RTSPServer();</text><polygon fill="#FFFF44" points="1369.5,2590.8376,1373.5,2594.8376,1369.5,2598.8376,1365.5,2594.8376" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="220" x="1378.5" y="2599.4321">virtual char const* allowedCommandNames();</text><polygon fill="#FFFF44" points="1369.5,2605.8606,1373.5,2609.8606,1369.5,2613.8606,1365.5,2609.8606" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="435" x="1378.5" y="2614.4551">virtual Boolean weImplementREGISTER(char const* proxyURLSuffix, char*&amp; responseStr);</text><polygon fill="#FFFF44" points="1369.5,2620.8835,1373.5,2624.8835,1369.5,2628.8835,1365.5,2624.8835" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="495" x="1378.5" y="2629.478">virtual void implementCmd_REGISTER(char const* url, char const* urlSuffix, int socketToRemoteServer,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="258" x="1378.5" y="2644.501">Boolean deliverViaTCP, char const* proxyURLSuffix);</text><polygon fill="#FFFF44" points="1369.5,2650.9294,1373.5,2654.9294,1369.5,2658.9294,1365.5,2654.9294" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="487" x="1378.5" y="2659.5239">virtual UserAuthenticationDatabase* getAuthenticationDatabaseForCommand(char const* cmdName);</text><polygon fill="#FFFF44" points="1369.5,2665.9524,1373.5,2669.9524,1369.5,2673.9524,1365.5,2669.9524" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="436" x="1378.5" y="2674.5469">virtual Boolean specialClientAccessCheck(int clientSocket, struct sockaddr_in&amp; clientAddr,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="107" x="1378.5" y="2689.5698">char const* urlSuffix);</text><polygon fill="#FFFF44" points="1369.5,2695.9983,1373.5,2699.9983,1369.5,2703.9983,1365.5,2699.9983" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="459" x="1378.5" y="2704.5928">virtual Boolean specialClientUserAccessCheck(int clientSocket, struct sockaddr_in&amp; clientAddr,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="220" x="1378.5" y="2719.6157">char const* urlSuffix, char const* username);</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1366.5" y="2728.0442"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="182" x="1378.5" y="2734.6387">virtual Boolean isRTSPServer() const;</text><polygon fill="#FFFF44" points="1369.5,2741.0671,1373.5,2745.0671,1369.5,2749.0671,1365.5,2745.0671" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="484" x="1378.5" y="2749.6616">virtual ClientConnection* createNewClientConnection(int clientSocket, struct sockaddr_in clientAddr);</text><polygon fill="#FFFF44" points="1369.5,2756.0901,1373.5,2760.0901,1369.5,2764.0901,1365.5,2760.0901" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="327" x="1378.5" y="2764.6846">virtual ClientSession* createNewClientSession(u_int32_t sessionId);</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1366.5" y="2773.113"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="304" x="1378.5" y="2779.7075">static void incomingConnectionHandlerHTTP(void*, int /*mask*/);</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1366.5" y="2788.136"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="192" x="1378.5" y="2794.7305">void incomingConnectionHandlerHTTP();</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1366.5" y="2803.1589"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="502" x="1378.5" y="2809.7534">void noteTCPStreamingOnSocket(int socketNum, RTSPClientSession* clientSession, unsigned trackNum);</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1366.5" y="2818.1819"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="514" x="1378.5" y="2824.7764">void unnoteTCPStreamingOnSocket(int socketNum, RTSPClientSession* clientSession, unsigned trackNum);</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1366.5" y="2833.2048"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="236" x="1378.5" y="2839.7993">void stopTCPStreamingOnSocket(int socketNum);</text><!--class RTSPServerWithREGISTERProxying--><rect fill="#FEFECE" filter="url(#f1sk7k77inbo74)" height="393.5278" id="RTSPServerWithREGISTERProxying" style="stroke: #A80036; stroke-width: 1.5;" width="524" x="207" y="2988.5"/><ellipse cx="365.75" cy="3004.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M364.3281,3009.8594 Q362.4688,3009.8594 361.375,3008.4688 Q360.2813,3007.0781 360.2813,3004.0938 Q360.2813,3001.5625 361.4453,2999.9063 Q362.6094,2998.25 364.5938,2998.25 Q366.0625,2998.25 366.5313,2998.375 Q367,2998.5781 367,2998.5781 Q367,2998.5781 367,2998.5078 Q367,2998.4375 367.6094,2997.5156 L368.6563,3001.1719 L367.3281,3001.5781 Q366.8594,3000.0313 366.1953,2999.3672 Q365.5313,2998.7031 364.4688,2998.7031 Q364.0781,2998.7031 363.3125,3000.2344 Q362.5469,3001.7656 362.5469,3004.0156 Q362.5469,3006.4844 363.2109,3007.875 Q363.875,3009.2656 364.4063,3009.2656 Q365.4688,3009.2656 366.2266,3008.5 Q366.9844,3007.7344 367.3281,3006.0781 L368.6563,3006.6719 Q368.3281,3008.0781 367.4297,3008.9688 Q366.5313,3009.8594 364.3281,3009.8594 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="198" x="386.25" y="3010.0576">RTSPServerWithREGISTERProxying</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="208" x2="730" y1="3020.5" y2="3020.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="253" x="227" y="3037.106">UserAuthenticationDatabase* authDatabase = NULL,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="318" x="227" y="3052.1289">UserAuthenticationDatabase* authDatabaseForREGISTER = NULL,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="193" x="227" y="3067.1519">unsigned reclamationTestSeconds = 65,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="178" x="227" y="3082.1748">Boolean streamRTPOverTCP = False,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="0" x="230" y="3097.1978"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="498" x="227" y="3112.2207">UserAuthenticationDatabase* authDatabase, UserAuthenticationDatabase* authDatabaseForREGISTER,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="169" x="227" y="3127.2437">unsigned reclamationTestSeconds,</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="215" y="3135.6721"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="145" x="227" y="3142.2666">Boolean fStreamRTPOverTCP;</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="215" y="3150.6951"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="152" x="227" y="3157.2896">int fVerbosityLevelForProxying;</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="215" y="3165.718"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="172" x="227" y="3172.3125">unsigned fRegisteredProxyCounter;</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="215" y="3180.741"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="156" x="227" y="3187.3354">char* fAllowedCommandNames;</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="215" y="3195.7639"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="254" x="227" y="3202.3584">UserAuthenticationDatabase* fAuthDBForREGISTER;</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="208" x2="730" y1="3208.7754" y2="3208.7754"/><ellipse cx="218" cy="3221.7869" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="479" x="227" y="3225.3813">static RTSPServerWithREGISTERProxying* createNew(UsageEnvironment&amp; env, Port ourPort = 554,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="168" x="227" y="3240.4043">int verbosityLevelForProxying = 0);</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="0" x="230" y="3255.4272"/><polygon fill="#FFFF44" points="218,3261.8557,222,3265.8557,218,3269.8557,214,3265.8557" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="428" x="227" y="3270.4502">RTSPServerWithREGISTERProxying(UsageEnvironment&amp; env, int ourSocket, Port ourPort,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="293" x="227" y="3285.4731">Boolean streamRTPOverTCP, int verbosityLevelForProxying);</text><polygon fill="#FFFF44" points="218,3291.9016,222,3295.9016,218,3299.9016,214,3295.9016" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="220" x="227" y="3300.4961">virtual ~RTSPServerWithREGISTERProxying();</text><polygon fill="#FFFF44" points="218,3306.9246,222,3310.9246,218,3314.9246,214,3310.9246" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="220" x="227" y="3315.519">virtual char const* allowedCommandNames();</text><polygon fill="#FFFF44" points="218,3321.9475,222,3325.9475,218,3329.9475,214,3325.9475" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="435" x="227" y="3330.542">virtual Boolean weImplementREGISTER(char const* proxyURLSuffix, char*&amp; responseStr);</text><polygon fill="#FFFF44" points="218,3336.9705,222,3340.9705,218,3344.9705,214,3340.9705" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="495" x="227" y="3345.5649">virtual void implementCmd_REGISTER(char const* url, char const* urlSuffix, int socketToRemoteServer,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="258" x="227" y="3360.5879">Boolean deliverViaTCP, char const* proxyURLSuffix);</text><polygon fill="#FFFF44" points="218,3367.0164,222,3371.0164,218,3375.0164,214,3371.0164" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="487" x="227" y="3375.6108">virtual UserAuthenticationDatabase* getAuthenticationDatabaseForCommand(char const* cmdName);</text><!--class RTSPClientConnection--><rect fill="#FEFECE" filter="url(#f1sk7k77inbo74)" height="754.0786" id="RTSPClientConnection" style="stroke: #A80036; stroke-width: 1.5;" width="677" x="1011.5" y="1188"/><ellipse cx="1282.25" cy="1204" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1280.8281,1209.3594 Q1278.9688,1209.3594 1277.875,1207.9688 Q1276.7813,1206.5781 1276.7813,1203.5938 Q1276.7813,1201.0625 1277.9453,1199.4063 Q1279.1094,1197.75 1281.0938,1197.75 Q1282.5625,1197.75 1283.0313,1197.875 Q1283.5,1198.0781 1283.5,1198.0781 Q1283.5,1198.0781 1283.5,1198.0078 Q1283.5,1197.9375 1284.1094,1197.0156 L1285.1563,1200.6719 L1283.8281,1201.0781 Q1283.3594,1199.5313 1282.6953,1198.8672 Q1282.0313,1198.2031 1280.9688,1198.2031 Q1280.5781,1198.2031 1279.8125,1199.7344 Q1279.0469,1201.2656 1279.0469,1203.5156 Q1279.0469,1205.9844 1279.7109,1207.375 Q1280.375,1208.7656 1280.9063,1208.7656 Q1281.9688,1208.7656 1282.7266,1208 Q1283.4844,1207.2344 1283.8281,1205.5781 L1285.1563,1206.1719 Q1284.8281,1207.5781 1283.9297,1208.4688 Q1283.0313,1209.3594 1280.8281,1209.3594 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="127" x="1302.75" y="1209.5576">RTSPClientConnection</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1012.5" x2="1687.5" y1="1220" y2="1220"/><polygon fill="none" points="1022.5,1228.0115,1026.5,1232.0115,1022.5,1236.0115,1018.5,1232.0115" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="122" x="1031.5" y="1236.606">friend class RTSPServer;</text><polygon fill="none" points="1022.5,1243.0344,1026.5,1247.0344,1022.5,1251.0344,1018.5,1247.0344" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="208" x="1031.5" y="1251.6289">char* urlSuffix, unsigned urlSuffixMaxSize,</text><polygon fill="none" points="1022.5,1258.0574,1026.5,1262.0574,1022.5,1266.0574,1018.5,1262.0574" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="266" x="1031.5" y="1266.6519">char* sessionCookie, unsigned sessionCookieMaxSize,</text><polygon fill="none" points="1022.5,1273.0803,1026.5,1277.0803,1022.5,1281.0803,1018.5,1277.0803" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="153" x="1031.5" y="1281.6748">RTSPServer&amp; fOurRTSPServer;</text><polygon fill="none" points="1022.5,1288.1033,1026.5,1292.1033,1022.5,1296.1033,1018.5,1292.1033" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="110" x="1031.5" y="1296.6978">int&amp; fClientInputSocket;</text><polygon fill="none" points="1022.5,1303.1262,1026.5,1307.1262,1022.5,1311.1262,1018.5,1307.1262" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="112" x="1031.5" y="1311.7207">int fClientOutputSocket;</text><polygon fill="none" points="1022.5,1318.1492,1026.5,1322.1492,1022.5,1326.1492,1018.5,1322.1492" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="88" x="1031.5" y="1326.7437">Boolean fIsActive;</text><polygon fill="none" points="1022.5,1333.1721,1026.5,1337.1721,1022.5,1341.1721,1018.5,1337.1721" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="130" x="1031.5" y="1341.7666">unsigned char* fLastCRLF;</text><polygon fill="none" points="1022.5,1348.1951,1026.5,1352.1951,1022.5,1356.1951,1018.5,1352.1951" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="131" x="1031.5" y="1356.7896">unsigned fRecursionCount;</text><polygon fill="none" points="1022.5,1363.218,1026.5,1367.218,1022.5,1371.218,1018.5,1367.218" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="128" x="1031.5" y="1371.8125">char const* fCurrentCSeq;</text><polygon fill="none" points="1022.5,1378.241,1026.5,1382.241,1022.5,1386.241,1018.5,1382.241" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="176" x="1031.5" y="1386.8354">Authenticator fCurrentAuthenticator;</text><polygon fill="none" points="1022.5,1393.2639,1026.5,1397.2639,1022.5,1401.2639,1018.5,1397.2639" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="125" x="1031.5" y="1401.8584">char* fOurSessionCookie;</text><polygon fill="none" points="1022.5,1408.2869,1026.5,1412.2869,1022.5,1416.2869,1018.5,1412.2869" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="170" x="1031.5" y="1416.8813">unsigned fBase64RemainderCount;</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1012.5" x2="1687.5" y1="1423.2983" y2="1423.2983"/><polygon fill="#FFFF44" points="1022.5,1431.3098,1026.5,1435.3098,1022.5,1439.3098,1018.5,1435.3098" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="255" x="1031.5" y="1439.9043">virtual void handleRequestBytes(int newBytesRead);</text><polygon fill="#FFFF44" points="1022.5,1446.3328,1026.5,1450.3328,1022.5,1454.3328,1018.5,1450.3328" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="461" x="1031.5" y="1454.9272">RTSPClientConnection(RTSPServer&amp; ourServer, int clientSocket, struct sockaddr_in clientAddr);</text><polygon fill="#FFFF44" points="1022.5,1461.3557,1026.5,1465.3557,1022.5,1469.3557,1018.5,1465.3557" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="155" x="1031.5" y="1469.9502">virtual ~RTSPClientConnection();</text><polygon fill="#FFFF44" points="1022.5,1476.3787,1026.5,1480.3787,1022.5,1484.3787,1018.5,1480.3787" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="169" x="1031.5" y="1484.9731">virtual void handleCmd_OPTIONS();</text><polygon fill="#FFFF44" points="1022.5,1491.4016,1026.5,1495.4016,1022.5,1499.4016,1018.5,1495.4016" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="340" x="1031.5" y="1499.9961">virtual void handleCmd_GET_PARAMETER(char const* fullRequestStr);</text><polygon fill="#FFFF44" points="1022.5,1506.4246,1026.5,1510.4246,1022.5,1514.4246,1018.5,1510.4246" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="339" x="1031.5" y="1515.019">virtual void handleCmd_SET_PARAMETER(char const* fullRequestStr);</text><polygon fill="#FFFF44" points="1022.5,1521.4475,1026.5,1525.4475,1022.5,1529.4475,1018.5,1525.4475" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="529" x="1031.5" y="1530.042">virtual void handleCmd_DESCRIBE(char const* urlPreSuffix, char const* urlSuffix, char const* fullRequestStr);</text><polygon fill="#FFFF44" points="1022.5,1536.4705,1026.5,1540.4705,1022.5,1544.4705,1018.5,1540.4705" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="480" x="1031.5" y="1545.0649">virtual void handleCmd_REGISTER(char const* url, char const* urlSuffix, char const* fullRequestStr,</text><polygon fill="#FFFF44" points="1022.5,1551.4934,1026.5,1555.4934,1022.5,1559.4934,1018.5,1555.4934" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="388" x="1031.5" y="1560.0879">Boolean reuseConnection, Boolean deliverViaTCP, char const* proxyURLSuffix);</text><polygon fill="#FFFF44" points="1022.5,1566.5164,1026.5,1570.5164,1022.5,1574.5164,1018.5,1570.5164" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="143" x="1031.5" y="1575.1108">virtual void handleCmd_bad();</text><polygon fill="#FFFF44" points="1022.5,1581.5393,1026.5,1585.5393,1022.5,1589.5393,1018.5,1585.5393" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="190" x="1031.5" y="1590.1338">virtual void handleCmd_notSupported();</text><polygon fill="#FFFF44" points="1022.5,1596.5623,1026.5,1600.5623,1022.5,1604.5623,1018.5,1600.5623" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="170" x="1031.5" y="1605.1567">virtual void handleCmd_notFound();</text><polygon fill="#FFFF44" points="1022.5,1611.5852,1026.5,1615.5852,1022.5,1619.5852,1018.5,1615.5852" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="209" x="1031.5" y="1620.1797">virtual void handleCmd_sessionNotFound();</text><polygon fill="#FFFF44" points="1022.5,1626.6082,1026.5,1630.6082,1022.5,1634.6082,1018.5,1630.6082" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="233" x="1031.5" y="1635.2026">virtual void handleCmd_unsupportedTransport();</text><polygon fill="#FFFF44" points="1022.5,1641.6311,1026.5,1645.6311,1022.5,1649.6311,1018.5,1645.6311" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="475" x="1031.5" y="1650.2256">virtual Boolean parseHTTPRequestString(char* resultCmdName, unsigned resultCmdNameMaxSize,</text><polygon fill="#FFFF44" points="1022.5,1656.6541,1026.5,1660.6541,1022.5,1664.6541,1018.5,1660.6541" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="224" x="1031.5" y="1665.2485">char* acceptStr, unsigned acceptStrMaxSize);</text><polygon fill="#FFFF44" points="1022.5,1671.677,1026.5,1675.677,1022.5,1679.677,1018.5,1675.677" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="215" x="1031.5" y="1680.2715">virtual void handleHTTPCmd_notSupported();</text><polygon fill="#FFFF44" points="1022.5,1686.7,1026.5,1690.7,1022.5,1694.7,1018.5,1690.7" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="195" x="1031.5" y="1695.2944">virtual void handleHTTPCmd_notFound();</text><polygon fill="#FFFF44" points="1022.5,1701.7229,1026.5,1705.7229,1022.5,1709.7229,1018.5,1705.7229" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="194" x="1031.5" y="1710.3174">virtual void handleHTTPCmd_OPTIONS();</text><polygon fill="#FFFF44" points="1022.5,1716.7458,1026.5,1720.7458,1022.5,1724.7458,1018.5,1720.7458" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="345" x="1031.5" y="1725.3403">virtual void handleHTTPCmd_TunnelingGET(char const* sessionCookie);</text><polygon fill="#FFFF44" points="1022.5,1731.7688,1026.5,1735.7688,1022.5,1739.7688,1018.5,1735.7688" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="651" x="1031.5" y="1740.3633">virtual Boolean handleHTTPCmd_TunnelingPOST(char const* sessionCookie, unsigned char const* extraData, unsigned extraDataSize);</text><polygon fill="#FFFF44" points="1022.5,1746.7917,1026.5,1750.7917,1022.5,1754.7917,1018.5,1750.7917" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="451" x="1031.5" y="1755.3862">virtual void handleHTTPCmd_StreamingGET(char const* urlSuffix, char const* fullRequestStr);</text><polygon fill="#FFFF44" points="1022.5,1761.8147,1026.5,1765.8147,1022.5,1769.8147,1018.5,1765.8147" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="130" x="1031.5" y="1770.4092">void resetRequestBuffer();</text><polygon fill="#FFFF44" points="1022.5,1776.8376,1026.5,1780.8376,1022.5,1784.8376,1018.5,1780.8376" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="99" x="1031.5" y="1785.4321">void closeSockets();</text><polygon fill="#FFFF44" points="1022.5,1791.8606,1026.5,1795.8606,1022.5,1799.8606,1018.5,1795.8606" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="339" x="1031.5" y="1800.4551">static void handleAlternativeRequestByte(void*, u_int8_t requestByte);</text><polygon fill="#FFFF44" points="1022.5,1806.8835,1026.5,1810.8835,1022.5,1814.8835,1018.5,1810.8835" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="286" x="1031.5" y="1815.478">void handleAlternativeRequestByte1(u_int8_t requestByte);</text><polygon fill="#FFFF44" points="1022.5,1821.9065,1026.5,1825.9065,1022.5,1829.9065,1018.5,1825.9065" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="480" x="1031.5" y="1830.501">Boolean authenticationOK(char const* cmdName, char const* urlSuffix, char const* fullRequestStr);</text><polygon fill="#FFFF44" points="1022.5,1836.9294,1026.5,1840.9294,1022.5,1844.9294,1018.5,1840.9294" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="522" x="1031.5" y="1845.5239">void changeClientInputSocket(int newSocketNum, unsigned char const* extraData, unsigned extraDataSize);</text><polygon fill="#FFFF44" points="1022.5,1851.9524,1026.5,1855.9524,1022.5,1859.9524,1018.5,1855.9524" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="338" x="1031.5" y="1860.5469">static void continueHandlingREGISTER(ParamsForREGISTER* params);</text><polygon fill="#FFFF44" points="1022.5,1866.9753,1026.5,1870.9753,1022.5,1874.9753,1018.5,1870.9753" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="347" x="1031.5" y="1875.5698">virtual void continueHandlingREGISTER1(ParamsForREGISTER* params);</text><polygon fill="#FFFF44" points="1022.5,1881.9983,1026.5,1885.9983,1022.5,1889.9983,1018.5,1885.9983" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="243" x="1031.5" y="1890.5928">void setRTSPResponse(char const* responseStr);</text><polygon fill="#FFFF44" points="1022.5,1897.0212,1026.5,1901.0212,1022.5,1905.0212,1018.5,1901.0212" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="342" x="1031.5" y="1905.6157">void setRTSPResponse(char const* responseStr, u_int32_t sessionId);</text><polygon fill="#FFFF44" points="1022.5,1912.0442,1026.5,1916.0442,1022.5,1920.0442,1018.5,1916.0442" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="358" x="1031.5" y="1920.6387">void setRTSPResponse(char const* responseStr, char const* contentStr);</text><polygon fill="#FFFF44" points="1022.5,1927.0671,1026.5,1931.0671,1022.5,1935.0671,1018.5,1931.0671" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="457" x="1031.5" y="1935.6616">void setRTSPResponse(char const* responseStr, u_int32_t sessionId, char const* contentStr);</text><!--class RTSPClientSession--><rect fill="#FEFECE" filter="url(#f1sk7k77inbo74)" height="558.7803" id="RTSPClientSession" style="stroke: #A80036; stroke-width: 1.5;" width="599" x="1845.5" y="2906"/><ellipse cx="2085.75" cy="2922" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2084.3281,2927.3594 Q2082.4688,2927.3594 2081.375,2925.9688 Q2080.2813,2924.5781 2080.2813,2921.5938 Q2080.2813,2919.0625 2081.4453,2917.4063 Q2082.6094,2915.75 2084.5938,2915.75 Q2086.0625,2915.75 2086.5313,2915.875 Q2087,2916.0781 2087,2916.0781 Q2087,2916.0781 2087,2916.0078 Q2087,2915.9375 2087.6094,2915.0156 L2088.6563,2918.6719 L2087.3281,2919.0781 Q2086.8594,2917.5313 2086.1953,2916.8672 Q2085.5313,2916.2031 2084.4688,2916.2031 Q2084.0781,2916.2031 2083.3125,2917.7344 Q2082.5469,2919.2656 2082.5469,2921.5156 Q2082.5469,2923.9844 2083.2109,2925.375 Q2083.875,2926.7656 2084.4063,2926.7656 Q2085.4688,2926.7656 2086.2266,2926 Q2086.9844,2925.2344 2087.3281,2923.5781 L2088.6563,2924.1719 Q2088.3281,2925.5781 2087.4297,2926.4688 Q2086.5313,2927.3594 2084.3281,2927.3594 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="110" x="2106.25" y="2927.5576">RTSPClientSession</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1846.5" x2="2443.5" y1="2938" y2="2938"/><polygon fill="none" points="1856.5,2946.0115,1860.5,2950.0115,1856.5,2954.0115,1852.5,2950.0115" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="122" x="1865.5" y="2954.606">friend class RTSPServer;</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="109" x="1865.5" y="2969.6289">char const* cmdName,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="225" x="1865.5" y="2984.6519">char const* urlPreSuffix, char const* urlSuffix,</text><polygon fill="none" points="1856.5,2991.0803,1860.5,2995.0803,1856.5,2999.0803,1852.5,2995.0803" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="153" x="1865.5" y="2999.6748">RTSPServer&amp; fOurRTSPServer;</text><polygon fill="none" points="1856.5,3006.1033,1860.5,3010.1033,1856.5,3014.1033,1852.5,3010.1033" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="200" x="1865.5" y="3014.6978">Boolean fIsMulticast, fStreamAfterSETUP;</text><polygon fill="none" points="1856.5,3021.1262,1860.5,3025.1262,1856.5,3029.1262,1852.5,3025.1262" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="168" x="1865.5" y="3029.7207">unsigned char fTCPStreamIdCount;</text><polygon fill="none" points="1856.5,3036.1492,1860.5,3040.1492,1856.5,3044.1492,1852.5,3040.1492" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="159" x="1865.5" y="3044.7437">TaskToken fLivenessCheckTask;</text><polygon fill="none" points="1856.5,3051.1721,1860.5,3055.1721,1856.5,3059.1721,1852.5,3055.1721" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="140" x="1865.5" y="3059.7666">unsigned fNumStreamStates;</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1846.5" x2="2443.5" y1="3066.1836" y2="3066.1836"/><polygon fill="#FFFF44" points="1856.5,3074.1951,1860.5,3078.1951,1856.5,3082.1951,1852.5,3078.1951" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="319" x="1865.5" y="3082.7896">RTSPClientSession(RTSPServer&amp; ourServer, u_int32_t sessionId);</text><polygon fill="#FFFF44" points="1856.5,3089.218,1860.5,3093.218,1856.5,3097.218,1852.5,3093.218" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="140" x="1865.5" y="3097.8125">virtual ~RTSPClientSession();</text><polygon fill="#FFFF44" points="1856.5,3104.241,1860.5,3108.241,1856.5,3112.241,1852.5,3108.241" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="362" x="1865.5" y="3112.8354">virtual void handleCmd_SETUP(RTSPClientConnection* ourClientConnection,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="362" x="1865.5" y="3127.8584">char const* urlPreSuffix, char const* urlSuffix, char const* fullRequestStr);</text><polygon fill="#FFFF44" points="1856.5,3134.2869,1860.5,3138.2869,1856.5,3142.2869,1852.5,3138.2869" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="398" x="1865.5" y="3142.8813">virtual void handleCmd_withinSession(RTSPClientConnection* ourClientConnection,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="134" x="1865.5" y="3157.9043">char const* fullRequestStr);</text><polygon fill="#FFFF44" points="1856.5,3164.3328,1860.5,3168.3328,1856.5,3172.3328,1852.5,3168.3328" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="389" x="1865.5" y="3172.9272">virtual void handleCmd_TEARDOWN(RTSPClientConnection* ourClientConnection,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="188" x="1865.5" y="3187.9502">ServerMediaSubsession* subsession);</text><polygon fill="#FFFF44" points="1856.5,3194.3787,1860.5,3198.3787,1856.5,3202.3787,1852.5,3198.3787" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="358" x="1865.5" y="3202.9731">virtual void handleCmd_PLAY(RTSPClientConnection* ourClientConnection,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="321" x="1865.5" y="3217.9961">ServerMediaSubsession* subsession, char const* fullRequestStr);</text><polygon fill="#FFFF44" points="1856.5,3224.4246,1860.5,3228.4246,1856.5,3232.4246,1852.5,3228.4246" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="364" x="1865.5" y="3233.019">virtual void handleCmd_PAUSE(RTSPClientConnection* ourClientConnection,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="188" x="1865.5" y="3248.042">ServerMediaSubsession* subsession);</text><polygon fill="#FFFF44" points="1856.5,3254.4705,1860.5,3258.4705,1856.5,3262.4705,1852.5,3258.4705" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="418" x="1865.5" y="3263.0649">virtual void handleCmd_GET_PARAMETER(RTSPClientConnection* ourClientConnection,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="321" x="1865.5" y="3278.0879">ServerMediaSubsession* subsession, char const* fullRequestStr);</text><polygon fill="#FFFF44" points="1856.5,3284.5164,1860.5,3288.5164,1856.5,3292.5164,1852.5,3288.5164" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="417" x="1865.5" y="3293.1108">virtual void handleCmd_SET_PARAMETER(RTSPClientConnection* ourClientConnection,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="321" x="1865.5" y="3308.1338">ServerMediaSubsession* subsession, char const* fullRequestStr);</text><polygon fill="#FFFF44" points="1856.5,3314.5623,1860.5,3318.5623,1856.5,3322.5623,1852.5,3318.5623" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="229" x="1865.5" y="3323.1567">void deleteStreamByTrack(unsigned trackNum);</text><polygon fill="#FFFF44" points="1856.5,3329.5852,1860.5,3333.5852,1856.5,3337.5852,1852.5,3333.5852" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="133" x="1865.5" y="3338.1797">void reclaimStreamStates();</text><polygon fill="#FFFF44" points="1856.5,3344.6082,1860.5,3348.6082,1856.5,3352.6082,1852.5,3348.6082" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="103" x="1865.5" y="3353.2026">Boolean isMulticast();</text><polygon fill="#FFFF44" points="1856.5,3359.6311,1860.5,3363.6311,1856.5,3367.6311,1852.5,3363.6311" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="99" x="1865.5" y="3368.2256">void noteLiveness();</text><polygon fill="#FFFF44" points="1856.5,3374.6541,1860.5,3378.6541,1856.5,3382.6541,1852.5,3378.6541" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="316" x="1865.5" y="3383.2485">static void noteClientLiveness(RTSPClientSession* clientSession);</text><polygon fill="#FFFF44" points="1856.5,3389.677,1860.5,3393.677,1856.5,3397.677,1852.5,3393.677" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="325" x="1865.5" y="3398.2715">static void livenessTimeoutTask(RTSPClientSession* clientSession);</text><polygon fill="#FFFF44" points="1856.5,3404.7,1860.5,3408.7,1856.5,3412.7,1852.5,3408.7" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="458" x="1865.5" y="3413.2944">void setRTSPResponse(RTSPClientConnection* ourClientConnection, char const* responseStr);</text><polygon fill="#FFFF44" points="1856.5,3419.7229,1860.5,3423.7229,1856.5,3427.7229,1852.5,3423.7229" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="557" x="1865.5" y="3428.3174">void setRTSPResponse(RTSPClientConnection* ourClientConnection, char const* responseStr, u_int32_t sessionId);</text><polygon fill="#FFFF44" points="1856.5,3434.7458,1860.5,3438.7458,1856.5,3442.7458,1852.5,3438.7458" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="573" x="1865.5" y="3443.3403">void setRTSPResponse(RTSPClientConnection* ourClientConnection, char const* responseStr, char const* contentStr);</text><polygon fill="#FFFF44" points="1856.5,3449.7688,1860.5,3453.7688,1856.5,3457.7688,1852.5,3453.7688" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="173" x="1865.5" y="3458.3633">Boolean usesTCPTransport() const;</text><!--class streamState--><rect fill="#FEFECE" filter="url(#f1sk7k77inbo74)" height="93.0688" id="streamState" style="stroke: #A80036; stroke-width: 1.5;" width="196" x="2047" y="3562.5"/><ellipse cx="2107.25" cy="3578.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2105.8281,3583.8594 Q2103.9688,3583.8594 2102.875,3582.4688 Q2101.7813,3581.0781 2101.7813,3578.0938 Q2101.7813,3575.5625 2102.9453,3573.9063 Q2104.1094,3572.25 2106.0938,3572.25 Q2107.5625,3572.25 2108.0313,3572.375 Q2108.5,3572.5781 2108.5,3572.5781 Q2108.5,3572.5781 2108.5,3572.5078 Q2108.5,3572.4375 2109.1094,3571.5156 L2110.1563,3575.1719 L2108.8281,3575.5781 Q2108.3594,3574.0313 2107.6953,3573.3672 Q2107.0313,3572.7031 2105.9688,3572.7031 Q2105.5781,3572.7031 2104.8125,3574.2344 Q2104.0469,3575.7656 2104.0469,3578.0156 Q2104.0469,3580.4844 2104.7109,3581.875 Q2105.375,3583.2656 2105.9063,3583.2656 Q2106.9688,3583.2656 2107.7266,3582.5 Q2108.4844,3581.7344 2108.8281,3580.0781 L2110.1563,3580.6719 Q2109.8281,3582.0781 2108.9297,3582.9688 Q2108.0313,3583.8594 2105.8281,3583.8594 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="67" x="2127.75" y="3584.0576">streamState</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2048" x2="2242" y1="3594.5" y2="3594.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="184" x="2053" y="3611.106">ServerMediaSubsession* subsession;</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="86" x="2053" y="3626.1289">int tcpSocketNum;</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="92" x="2053" y="3641.1519">void* streamToken;</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2048" x2="2242" y1="3647.5688" y2="3647.5688"/><!--class ServerMediaSessionIterator--><rect fill="#FEFECE" filter="url(#f1sk7k77inbo74)" height="108.0918" id="ServerMediaSessionIterator" style="stroke: #A80036; stroke-width: 1.5;" width="272" x="1538" y="3131.5"/><ellipse cx="1593.75" cy="3147.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1592.3281,3152.8594 Q1590.4688,3152.8594 1589.375,3151.4688 Q1588.2813,3150.0781 1588.2813,3147.0938 Q1588.2813,3144.5625 1589.4453,3142.9063 Q1590.6094,3141.25 1592.5938,3141.25 Q1594.0625,3141.25 1594.5313,3141.375 Q1595,3141.5781 1595,3141.5781 Q1595,3141.5781 1595,3141.5078 Q1595,3141.4375 1595.6094,3140.5156 L1596.6563,3144.1719 L1595.3281,3144.5781 Q1594.8594,3143.0313 1594.1953,3142.3672 Q1593.5313,3141.7031 1592.4688,3141.7031 Q1592.0781,3141.7031 1591.3125,3143.2344 Q1590.5469,3144.7656 1590.5469,3147.0156 Q1590.5469,3149.4844 1591.2109,3150.875 Q1591.875,3152.2656 1592.4063,3152.2656 Q1593.4688,3152.2656 1594.2266,3151.5 Q1594.9844,3150.7344 1595.3281,3149.0781 L1596.6563,3149.6719 Q1596.3281,3151.0781 1595.4297,3151.9688 Q1594.5313,3152.8594 1592.3281,3152.8594 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="152" x="1614.25" y="3153.0576">ServerMediaSessionIterator</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1539" x2="1809" y1="3163.5" y2="3163.5"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="1546" y="3173.5115"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="157" x="1558" y="3180.106">HashTable::Iterator* fOurIterator;</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1539" x2="1809" y1="3186.5229" y2="3186.5229"/><ellipse cx="1549" cy="3199.5344" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="246" x="1558" y="3203.1289">ServerMediaSessionIterator(RTSPServer&amp; server);</text><ellipse cx="1549" cy="3214.5574" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="183" x="1558" y="3218.1519">virtual ~ServerMediaSessionIterator();</text><ellipse cx="1549" cy="3229.5803" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="139" x="1558" y="3233.1748">ServerMediaSession* next();</text><!--class ParamsForREGISTER--><rect fill="#FEFECE" filter="url(#f1sk7k77inbo74)" height="183.2065" id="ParamsForREGISTER" style="stroke: #A80036; stroke-width: 1.5;" width="500" x="823" y="2332.5"/><ellipse cx="1007.25" cy="2348.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1005.8281,2353.8594 Q1003.9688,2353.8594 1002.875,2352.4688 Q1001.7813,2351.0781 1001.7813,2348.0938 Q1001.7813,2345.5625 1002.9453,2343.9063 Q1004.1094,2342.25 1006.0938,2342.25 Q1007.5625,2342.25 1008.0313,2342.375 Q1008.5,2342.5781 1008.5,2342.5781 Q1008.5,2342.5781 1008.5,2342.5078 Q1008.5,2342.4375 1009.1094,2341.5156 L1010.1563,2345.1719 L1008.8281,2345.5781 Q1008.3594,2344.0313 1007.6953,2343.3672 Q1007.0313,2342.7031 1005.9688,2342.7031 Q1005.5781,2342.7031 1004.8125,2344.2344 Q1004.0469,2345.7656 1004.0469,2348.0156 Q1004.0469,2350.4844 1004.7109,2351.875 Q1005.375,2353.2656 1005.9063,2353.2656 Q1006.9688,2353.2656 1007.7266,2352.5 Q1008.4844,2351.7344 1008.8281,2350.0781 L1010.1563,2350.6719 Q1009.8281,2352.0781 1008.9297,2352.9688 Q1008.0313,2353.8594 1005.8281,2353.8594 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="123" x="1027.75" y="2354.0576">ParamsForREGISTER</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="824" x2="1322" y1="2364.5" y2="2364.5"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="831" y="2374.5115"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="169" x="843" y="2381.106">friend class RTSPClientConnection;</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="831" y="2389.5344"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="192" x="843" y="2396.1289">RTSPClientConnection* fOurConnection;</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="831" y="2404.5574"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="56" x="843" y="2411.1519">char* fURL;</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="831" y="2419.5803"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="85" x="843" y="2426.1748">char* fURLSuffix;</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="831" y="2434.6033"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="212" x="843" y="2441.1978">Boolean fReuseConnection, fDeliverViaTCP;</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="831" y="2449.6262"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="113" x="843" y="2456.2207">char* fProxyURLSuffix;</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="824" x2="1322" y1="2462.6377" y2="2462.6377"/><ellipse cx="834" cy="2475.6492" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="474" x="843" y="2479.2437">ParamsForREGISTER(RTSPClientConnection* ourConnection, char const* url, char const* urlSuffix,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="388" x="843" y="2494.2666">Boolean reuseConnection, Boolean deliverViaTCP, char const* proxyURLSuffix);</text><ellipse cx="834" cy="2505.6951" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="150" x="843" y="2509.2896">virtual ~ParamsForREGISTER();</text><!--class RTSPServerSupportingHTTPStreaming--><rect fill="#FEFECE" filter="url(#f1sk7k77inbo74)" height="228.2754" id="RTSPServerSupportingHTTPStreaming" style="stroke: #A80036; stroke-width: 1.5;" width="536" x="766" y="3071.5"/><ellipse cx="922.25" cy="3087.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M920.8281,3092.8594 Q918.9688,3092.8594 917.875,3091.4688 Q916.7813,3090.0781 916.7813,3087.0938 Q916.7813,3084.5625 917.9453,3082.9063 Q919.1094,3081.25 921.0938,3081.25 Q922.5625,3081.25 923.0313,3081.375 Q923.5,3081.5781 923.5,3081.5781 Q923.5,3081.5781 923.5,3081.5078 Q923.5,3081.4375 924.1094,3080.5156 L925.1563,3084.1719 L923.8281,3084.5781 Q923.3594,3083.0313 922.6953,3082.3672 Q922.0313,3081.7031 920.9688,3081.7031 Q920.5781,3081.7031 919.8125,3083.2344 Q919.0469,3084.7656 919.0469,3087.0156 Q919.0469,3089.4844 919.7109,3090.875 Q920.375,3092.2656 920.9063,3092.2656 Q921.9688,3092.2656 922.7266,3091.5 Q923.4844,3090.7344 923.8281,3089.0781 L925.1563,3089.6719 Q924.8281,3091.0781 923.9297,3091.9688 Q923.0313,3092.8594 920.8281,3092.8594 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="215" x="942.75" y="3093.0576">RTSPServerSupportingHTTPStreaming</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="767" x2="1301" y1="3103.5" y2="3103.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="253" x="772" y="3120.106">UserAuthenticationDatabase* authDatabase = NULL,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="0" x="775" y="3135.1289"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="129" x="772" y="3150.1519">int ourSocket, Port ourPort,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="215" x="772" y="3165.1748">UserAuthenticationDatabase* authDatabase,</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="767" x2="1301" y1="3171.5918" y2="3171.5918"/><ellipse cx="777" cy="3184.6033" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="495" x="786" y="3188.1978">static RTSPServerSupportingHTTPStreaming* createNew(UsageEnvironment&amp; env, Port rtspPort = 554,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="197" x="786" y="3203.2207">unsigned reclamationTestSeconds = 65);</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="0" x="789" y="3218.2437"/><ellipse cx="777" cy="3229.6721" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="388" x="786" y="3233.2666">Boolean setHTTPPort(Port httpPort) { return setUpTunnelingOverHTTP(httpPort); }</text><polygon fill="#FFFF44" points="777,3239.6951,781,3243.6951,777,3247.6951,773,3243.6951" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="309" x="786" y="3248.2896">RTSPServerSupportingHTTPStreaming(UsageEnvironment&amp; env,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="173" x="786" y="3263.3125">unsigned reclamationTestSeconds);</text><polygon fill="#FFFF44" points="777,3269.741,781,3273.741,777,3277.741,773,3273.741" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="233" x="786" y="3278.3354">virtual ~RTSPServerSupportingHTTPStreaming();</text><polygon fill="#FFFF44" points="777,3284.7639,781,3288.7639,777,3292.7639,773,3288.7639" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="510" x="786" y="3293.3584">virtual RTSPClientConnection* createNewClientConnection(int clientSocket, struct sockaddr_in clientAddr);</text><!--class RTSPClientConnectionSupportingHTTPStreaming--><rect fill="#FEFECE" filter="url(#f1sk7k77inbo74)" height="168.1836" id="RTSPClientConnectionSupportingHTTPStreaming" style="stroke: #A80036; stroke-width: 1.5;" width="612" x="6" y="3525"/><ellipse cx="170.25" cy="3541" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M168.8281,3546.3594 Q166.9688,3546.3594 165.875,3544.9688 Q164.7813,3543.5781 164.7813,3540.5938 Q164.7813,3538.0625 165.9453,3536.4063 Q167.1094,3534.75 169.0938,3534.75 Q170.5625,3534.75 171.0313,3534.875 Q171.5,3535.0781 171.5,3535.0781 Q171.5,3535.0781 171.5,3535.0078 Q171.5,3534.9375 172.1094,3534.0156 L173.1563,3537.6719 L171.8281,3538.0781 Q171.3594,3536.5313 170.6953,3535.8672 Q170.0313,3535.2031 168.9688,3535.2031 Q168.5781,3535.2031 167.8125,3536.7344 Q167.0469,3538.2656 167.0469,3540.5156 Q167.0469,3542.9844 167.7109,3544.375 Q168.375,3545.7656 168.9063,3545.7656 Q169.9688,3545.7656 170.7266,3545 Q171.4844,3544.2344 171.8281,3542.5781 L173.1563,3543.1719 Q172.8281,3544.5781 171.9297,3545.4688 Q171.0313,3546.3594 168.8281,3546.3594 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="275" x="190.75" y="3546.5576">RTSPClientConnectionSupportingHTTPStreaming</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="7" x2="617" y1="3557" y2="3557"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="14" y="3567.0115"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="127" x="26" y="3573.606">u_int32_t fClientSessionId;</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="14" y="3582.0344"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="154" x="26" y="3588.6289">FramedSource* fStreamSource;</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="14" y="3597.0574"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="242" x="26" y="3603.6519">ByteStreamMemoryBufferSource* fPlaylistSource;</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="14" y="3612.0803"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="126" x="26" y="3618.6748">TCPStreamSink* fTCPSink;</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="7" x2="617" y1="3625.0918" y2="3625.0918"/><ellipse cx="17" cy="3638.1033" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="586" x="26" y="3641.6978">RTSPClientConnectionSupportingHTTPStreaming(RTSPServer&amp; ourServer, int clientSocket, struct sockaddr_in clientAddr);</text><ellipse cx="17" cy="3653.1262" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="280" x="26" y="3656.7207">virtual ~RTSPClientConnectionSupportingHTTPStreaming();</text><polygon fill="#FFFF44" points="17,3663.1492,21,3667.1492,17,3671.1492,13,3667.1492" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="451" x="26" y="3671.7437">virtual void handleHTTPCmd_StreamingGET(char const* urlSuffix, char const* fullRequestStr);</text><polygon fill="#FFFF44" points="17,3678.1721,21,3682.1721,17,3686.1721,13,3682.1721" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="208" x="26" y="3686.7666">static void afterStreaming(void* clientData);</text><!--class DynamicRTSPServer--><rect fill="#FEFECE" filter="url(#f1sk7k77inbo74)" height="168.1836" id="DynamicRTSPServer" style="stroke: #A80036; stroke-width: 1.5;" width="446" x="811" y="3525"/><ellipse cx="972.25" cy="3541" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M970.8281,3546.3594 Q968.9688,3546.3594 967.875,3544.9688 Q966.7813,3543.5781 966.7813,3540.5938 Q966.7813,3538.0625 967.9453,3536.4063 Q969.1094,3534.75 971.0938,3534.75 Q972.5625,3534.75 973.0313,3534.875 Q973.5,3535.0781 973.5,3535.0781 Q973.5,3535.0781 973.5,3535.0078 Q973.5,3534.9375 974.1094,3534.0156 L975.1563,3537.6719 L973.8281,3538.0781 Q973.3594,3536.5313 972.6953,3535.8672 Q972.0313,3535.2031 970.9688,3535.2031 Q970.5781,3535.2031 969.8125,3536.7344 Q969.0469,3538.2656 969.0469,3540.5156 Q969.0469,3542.9844 969.7109,3544.375 Q970.375,3545.7656 970.9063,3545.7656 Q971.9688,3545.7656 972.7266,3545 Q973.4844,3544.2344 973.8281,3542.5781 L975.1563,3543.1719 Q974.8281,3544.5781 973.9297,3545.4688 Q973.0313,3546.3594 970.8281,3546.3594 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="115" x="992.75" y="3546.5576">DynamicRTSPServer</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="812" x2="1256" y1="3557" y2="3557"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="215" x="831" y="3573.606">UserAuthenticationDatabase* authDatabase,</text><polygon fill="none" points="822,3580.0344,826,3584.0344,822,3588.0344,818,3584.0344" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="136" x="831" y="3588.6289">virtual ServerMediaSession*</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="812" x2="1256" y1="3595.0459" y2="3595.0459"/><ellipse cx="822" cy="3608.0574" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="378" x="831" y="3611.6519">static DynamicRTSPServer* createNew(UsageEnvironment&amp; env, Port ourPort,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="197" x="831" y="3626.6748">unsigned reclamationTestSeconds = 65);</text><polygon fill="#FFFF44" points="822,3633.1033,826,3637.1033,822,3641.1033,818,3637.1033" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="357" x="831" y="3641.6978">DynamicRTSPServer(UsageEnvironment&amp; env, int ourSocket, Port ourPort,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="391" x="831" y="3656.7207">UserAuthenticationDatabase* authDatabase, unsigned reclamationTestSeconds);</text><polygon fill="#FFFF44" points="822,3663.1492,826,3667.1492,822,3671.1492,818,3667.1492" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="149" x="831" y="3671.7437">virtual ~DynamicRTSPServer();</text><polygon fill="#FFFF44" points="822,3678.1721,826,3682.1721,822,3686.1721,818,3682.1721" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="420" x="831" y="3686.7666">lookupServerMediaSession(char const* streamName, Boolean isFirstLookupInSession);</text><!--class RegisterRequestRecord--><rect fill="#FEFECE" filter="url(#f1sk7k77inbo74)" height="48" id="RegisterRequestRecord" style="stroke: #A80036; stroke-width: 1.5;" width="166" x="1337" y="3161.5"/><ellipse cx="1352" cy="3177.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1350.5781,3182.8594 Q1348.7188,3182.8594 1347.625,3181.4688 Q1346.5313,3180.0781 1346.5313,3177.0938 Q1346.5313,3174.5625 1347.6953,3172.9063 Q1348.8594,3171.25 1350.8438,3171.25 Q1352.3125,3171.25 1352.7813,3171.375 Q1353.25,3171.5781 1353.25,3171.5781 Q1353.25,3171.5781 1353.25,3171.5078 Q1353.25,3171.4375 1353.8594,3170.5156 L1354.9063,3174.1719 L1353.5781,3174.5781 Q1353.1094,3173.0313 1352.4453,3172.3672 Q1351.7813,3171.7031 1350.7188,3171.7031 Q1350.3281,3171.7031 1349.5625,3173.2344 Q1348.7969,3174.7656 1348.7969,3177.0156 Q1348.7969,3179.4844 1349.4609,3180.875 Q1350.125,3182.2656 1350.6563,3182.2656 Q1351.7188,3182.2656 1352.4766,3181.5 Q1353.2344,3180.7344 1353.5781,3179.0781 L1354.9063,3179.6719 Q1354.5781,3181.0781 1353.6797,3181.9688 Q1352.7813,3182.8594 1350.5781,3182.8594 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="134" x="1366" y="3183.0576">RegisterRequestRecord</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1338" x2="1502" y1="3193.5" y2="3193.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1338" x2="1502" y1="3201.5" y2="3201.5"/><!--link Medium to GenericMediaServer--><path d="M1742,376.65 C1742,389.69 1742,402.81 1742,415.82 " fill="none" id="Medium-GenericMediaServer" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="none" points="1735,376.26,1742,356.26,1749,376.26,1735,376.26" style="stroke: #A80036; stroke-width: 1.0;"/><!--link GenericMediaServer to ClientConnection--><path d="M1570.56,806.96 C1561.05,819.02 1551.64,831.03 1542.48,842.8 " fill="none" id="GenericMediaServer-ClientConnection" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1533.04,854.98,1541.7139,850.3149,1536.1021,851.0273,1535.3897,845.4155,1533.04,854.98" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1536.1021" x2="1542.23" y1="851.0273" y2="843.125"/><ellipse cx="1574.9559" cy="801.4036" fill="#FFFFFF" rx="8" ry="8" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1569.9919" x2="1579.92" y1="807.6772" y2="795.13"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1568.6823" x2="1581.2295" y1="796.4395" y2="806.3677"/><!--link ClientConnection to GenericMediaServer--><path d="M1558.25,854.98 C1572.89,836.94 1587.92,818.17 1602.8,799.39 " fill="none" id="ClientConnection-GenericMediaServer" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1606.17,795.13,1597.4548,799.7174,1603.0727,799.0551,1603.735,804.6731,1606.17,795.13" style="stroke: #A80036; stroke-width: 1.0;"/><!--link GenericMediaServer to ClientSession--><path d="M1851.57,808.07 C1871.73,841.14 1892.17,873.83 1910.5,902.2 " fill="none" id="GenericMediaServer-ClientSession" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1918.76,914.92,1917.2139,905.1933,1916.0372,910.7264,1910.5041,909.5497,1918.76,914.92" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1916.0372" x2="1910.585" y1="910.7264" y2="902.34"/><ellipse cx="1847.854" cy="801.967" fill="#FFFFFF" rx="8" ry="8" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1852.008" x2="1843.7" y1="808.8039" y2="795.13"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1841.017" x2="1854.691" y1="806.121" y2="797.813"/><!--link ClientSession to GenericMediaServer--><path d="M1940.13,914.92 C1921.53,881.53 1897.53,840.6 1872.67,799.61 " fill="none" id="ClientSession-GenericMediaServer" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1869.95,795.13,1871.2127,804.8976,1872.5497,799.401,1878.0463,800.738,1869.95,795.13" style="stroke: #A80036; stroke-width: 1.0;"/><!--link GenericMediaServer to RTSPServer--><path d="M1738.92,815.26 C1734.46,1078.17 1724.61,1543.73 1706,1942 C1705.09,1961.54 1704.07,1981.52 1702.99,2001.71 " fill="none" id="GenericMediaServer-RTSPServer" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="none" points="1731.92,815.01,1739.26,795.13,1745.92,815.24,1731.92,815.01" style="stroke: #A80036; stroke-width: 1.0;"/><!--link RTSPServer to RTSPClientConnection--><path d="M1514.77,2001.83 C1507.89,1983.63 1501,1965.41 1494.16,1947.31 " fill="none" id="RTSPServer-RTSPClientConnection" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1492.23,1942.2,1491.681,1952.0335,1494.0028,1946.8752,1499.1612,1949.197,1492.23,1942.2" style="stroke: #A80036; stroke-width: 1.0;"/><!--link RTSPServer to RTSPClientConnection--><path d="M1535.67,1987.68 C1531.74,1977.31 1527.79,1966.94 1523.83,1956.6 " fill="none" id="RTSPServer-RTSPClientConnection" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1518.3,1942.2,1517.7894,1952.0356,1520.0911,1946.8682,1525.2585,1949.1699,1518.3,1942.2" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1520.0911" x2="1523.68" y1="1946.8682" y2="1956.21"/><ellipse cx="1538.1926" cy="1994.3463" fill="#FFFFFF" rx="8" ry="8" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1535.3653" x2="1541.02" y1="1986.8626" y2="2001.83"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1545.6764" x2="1530.7089" y1="1991.5189" y2="1997.1736"/><!--link RTSPClientConnection to RTSPServer--><path d="M1466.15,1942.2 C1472.87,1960.29 1479.69,1978.49 1486.58,1996.69 " fill="none" id="RTSPClientConnection-RTSPServer" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1488.52,2001.83,1489.069,1991.9965,1486.7472,1997.1548,1481.5888,1994.833,1488.52,2001.83" style="stroke: #A80036; stroke-width: 1.0;"/><!--link RTSPServer to RTSPClientSession--><path d="M1922.47,2846.119 C1934.07,2864.724 1945.63,2883.194 1957.03,2901.348 " fill="none" id="RTSPServer-RTSPClientSession" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1959.92,2905.957,1958.5284,2896.2069,1957.2641,2901.7207,1951.7504,2900.4564,1959.92,2905.957" style="stroke: #A80036; stroke-width: 1.0;"/><!--link RTSPServer to RTSPClientSession--><path d="M1956.73,2859.338 C1963.68,2870.625 1970.57,2881.846 1977.37,2892.961 " fill="none" id="RTSPServer-RTSPClientSession" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1985.33,2905.957,1984.0458,2896.1922,1982.7209,2901.6917,1977.2213,2900.3668,1985.33,2905.957" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1982.7209" x2="1977.5" y1="2901.6917" y2="2893.1625"/><ellipse cx="1952.7763" cy="2852.9301" fill="#FFFFFF" rx="8" ry="8" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1956.9727" x2="1948.58" y1="2859.7411" y2="2846.119"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1945.9653" x2="1959.5874" y1="2857.1264" y2="2848.7337"/><!--link RTSPServer to ServerMediaSessionIterator--><path d="M1661.32,2846.119 C1661.68,2957.073 1663.51,3063.26 1666.81,3126.184 " fill="none" id="RTSPServer-ServerMediaSessionIterator" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1667.09,3131.387,1670.5989,3122.1844,1666.8204,3126.3943,1662.6105,3122.6158,1667.09,3131.387" style="stroke: #A80036; stroke-width: 1.0;"/><!--link RTSPServer to ServerMediaSessionIterator--><path d="M1687.37,2861.126 C1686.89,2960.992 1685.15,3055.538 1682.13,3116.305 " fill="none" id="RTSPServer-ServerMediaSessionIterator" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1681.32,3131.387,1685.8012,3122.6167,1681.5906,3126.3943,1677.8129,3122.1837,1681.32,3131.387" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1681.5906" x2="1682.13" y1="3126.3943" y2="3116.409"/><ellipse cx="1687.3972" cy="2854.1189" fill="#FFFFFF" rx="8" ry="8" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1687.3645" x2="1687.43" y1="2862.1189" y2="2846.119"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1679.3973" x2="1695.3972" y1="2854.0862" y2="2854.1517"/><!--link RTSPServer to RegisterRequestRecord--><path d="M1533.16,2846.119 C1489.28,2977.338 1447.63,3101.888 1429.5,3156.097 " fill="none" id="RTSPServer-RegisterRequestRecord" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1427.82,3161.121,1434.4674,3153.8538,1429.4054,3156.379,1426.8802,3151.3171,1427.82,3161.121" style="stroke: #A80036; stroke-width: 1.0;"/><!--link RTSPServer to RTSPServerWithREGISTERProxying--><path d="M1341.17,2845.358 C1340.78,2845.573 1340.39,2845.787 1340,2846 C1107.99,2972.92 986.959,2792.698 748,2906 C705.33,2926.232 665.393,2955.79 629.816,2988.176 " fill="none" id="RTSPServer-RTSPServerWithREGISTERProxying" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="1337.69,2839.283,1358.5,2835.26,1344.74,2851.378,1337.69,2839.283" style="stroke: #A80036; stroke-width: 1.0;"/><!--link ClientConnection to RTSPClientConnection--><path d="M1414.04,1148.11 C1412.06,1160.97 1410.01,1174.27 1407.92,1187.88 " fill="none" id="ClientConnection-RTSPClientConnection" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="1407.13,1147,1417.09,1128.3,1420.96,1149.13,1407.13,1147" style="stroke: #A80036; stroke-width: 1.0;"/><!--link ClientSession to RTSPClientSession--><path d="M1982.44,1088.41 C2006.83,1402.92 2085.02,2411.14 2123.37,2905.662 " fill="none" id="ClientSession-RTSPClientSession" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="1975.44,1088.75,1980.88,1068.27,1989.4,1087.67,1975.44,1088.75" style="stroke: #A80036; stroke-width: 1.0;"/><!--link RTSPClientSession to streamState--><path d="M2145,3480.16 C2145,3504.863 2145,3527.757 2145,3547.144 " fill="none" id="RTSPClientSession-streamState" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="2145,3562.236,2149,3553.236,2145,3557.236,2141,3553.236,2145,3562.236" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2145" x2="2145" y1="3557.236" y2="3547.236"/><ellipse cx="2145" cy="3473.005" fill="#FFFFFF" rx="8" ry="8" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2145" x2="2145" y1="3481.005" y2="3465.005"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2137" x2="2153" y1="3473.005" y2="3473.005"/><!--link RTSPClientConnection to ParamsForREGISTER--><path d="M1211.04,1956.6 C1167.83,2089.32 1124.69,2226.93 1098.24,2317.96 " fill="none" id="RTSPClientConnection-ParamsForREGISTER" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1094.06,2332.44,1100.4042,2324.9067,1095.4499,2327.6371,1092.7196,2322.6828,1094.06,2332.44" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1095.4499" x2="1098.215" y1="2327.6371" y2="2318.03"/><ellipse cx="1213.2628" cy="1949.8068" fill="#FFFFFF" rx="8" ry="8" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1210.7857" x2="1215.74" y1="1957.4136" y2="1942.2"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1205.656" x2="1220.8696" y1="1947.3296" y2="1952.284"/><!--link ParamsForREGISTER to RTSPClientConnection--><path d="M1110.97,2332.44 C1144.46,2239.96 1194.48,2090.08 1240.19,1947.28 " fill="none" id="ParamsForREGISTER-RTSPClientConnection" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1241.81,1942.2,1235.2549,1949.5506,1240.2846,1946.9616,1242.8735,1951.9913,1241.81,1942.2" style="stroke: #A80036; stroke-width: 1.0;"/><!--link RTSPServer to RTSPServerSupportingHTTPStreaming--><path d="M1345.45,2839.558 C1343.63,2841.713 1341.81,2843.86 1340,2846 C1275.09,2922.615 1199.45,3006.343 1139.61,3071.36 " fill="none" id="RTSPServer-RTSPServerSupportingHTTPStreaming" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="1340.19,2834.93,1358.42,2824.13,1350.91,2843.942,1340.19,2834.93" style="stroke: #A80036; stroke-width: 1.0;"/><!--link RTSPServerSupportingHTTPStreaming to RTSPClientConnectionSupportingHTTPStreaming--><path d="M930.194,3310.535 C879.842,3364.226 815.662,3424.024 748,3465 C712.035,3486.78 672.367,3505.658 632.051,3521.904 " fill="none" id="RTSPServerSupportingHTTPStreaming-RTSPClientConnectionSupportingHTTPStreaming" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="618.064,3527.427,627.9041,3527.8423,622.7146,3525.5908,624.9661,3520.4013,618.064,3527.427" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="622.7146" x2="632.016" y1="3525.5908" y2="3521.918"/><ellipse cx="934.9589" cy="3305.3977" fill="#FFFFFF" rx="8" ry="8" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="929.5179" x2="940.4" y1="3311.2624" y2="3299.533"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="929.0942" x2="940.8236" y1="3299.9566" y2="3310.8388"/><!--link RTSPClientConnection to RTSPClientConnectionSupportingHTTPStreaming--><path d="M995.7,1823.93 C929.142,1879.3 862.481,1939.94 805,2002 C474.628,2358.7 332.248,2441.39 189,2906 C115.8,3143.416 102.6022,3232.062 189,3465 C196.915,3486.339 209.597,3506.631 223.876,3524.871 " fill="none" id="RTSPClientConnection-RTSPClientConnectionSupportingHTTPStreaming" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="991.37,1818.43,1011.25,1811.09,1000.286,1829.22,991.37,1818.43" style="stroke: #A80036; stroke-width: 1.0;"/><!--link RTSPServerSupportingHTTPStreaming to DynamicRTSPServer--><path d="M1034,3320.151 C1034,3387.318 1034,3466.604 1034,3524.94 " fill="none" id="RTSPServerSupportingHTTPStreaming-DynamicRTSPServer" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="1027,3319.731,1034,3299.731,1041,3319.731,1027,3319.731" style="stroke: #A80036; stroke-width: 1.0;"/><!--
@startuml

class Medium {
    + static Boolean lookupByName(UsageEnvironment& env, char const* mediumName, Medium*& resultMedium);
    + static void close(UsageEnvironment& env, char const* mediumName);
    + static void close(Medium* medium); // alternative close() method using ptrs
    + UsageEnvironment& envir() const { return fEnviron; }
    + char const* name() const { return fMediumName; }
    + virtual Boolean isSource() const;
    + virtual Boolean isSink() const;
    + virtual Boolean isRTCPInstance() const;
    + virtual Boolean isRTSPClient() const;
    + virtual Boolean isRTSPServer() const;
    + virtual Boolean isMediaSession() const;
    + virtual Boolean isServerMediaSession() const;
    + virtual Boolean isDarwinInjector() const;
    # friend class MediaLookupTable;
    # Medium(UsageEnvironment& env);
    # virtual ~Medium();
    # TaskToken& nextTask();
    - UsageEnvironment& fEnviron;
    - char fMediumName[mediumNameMaxLen];
    - TaskToken fNextTask;
}


class GenericMediaServer {
    + void addServerMediaSession(ServerMediaSession* serverMediaSession);
    + virtual ServerMediaSession*
    + lookupServerMediaSession(char const* streamName, Boolean isFirstLookupInSession = True);
    + void removeServerMediaSession(ServerMediaSession* serverMediaSession);
    + void removeServerMediaSession(char const* streamName);
    + void closeAllClientSessionsForServerMediaSession(ServerMediaSession* serverMediaSession);
    + void closeAllClientSessionsForServerMediaSession(char const* streamName);
    + void deleteServerMediaSession(ServerMediaSession* serverMediaSession);
    + void deleteServerMediaSession(char const* streamName);
    # GenericMediaServer(UsageEnvironment& env, int ourSocket, Port ourPort);
    # virtual ~GenericMediaServer();
    # static int setUpOurSocket(UsageEnvironment& env, Port& ourPort);
    # static void incomingConnectionHandler(void*, int /*mask*/);
    # void incomingConnectionHandler();
    # void incomingConnectionHandlerOnSocket(int serverSocket);
    # virtual ClientConnection*
    # createNewClientConnection(int clientSocket, struct sockaddr_in clientAddr) = 0;
    # int fServerSocket;
    # Port fServerPort;
    # HashTable* fServerMediaSessions;
    # HashTable* fClientConnections;
    # HashTable* fClientSessions;
}


class ClientConnection {
    # ClientConnection(GenericMediaServer& ourServer, int clientSocket, struct sockaddr_in clientAddr);
    # virtual ~ClientConnection();
    # UsageEnvironment& envir() { return fOurServer.envir(); }
    # void closeSockets();
    # static void incomingRequestHandler(void*, int /*mask*/);
    # void incomingRequestHandler();
    # virtual void handleRequestBytes(int newBytesRead) = 0;
    # void resetRequestBuffer();
    # friend class GenericMediaServer;
    # GenericMediaServer& fOurServer;
    # int fOurSocket;
    # struct sockaddr_in fClientAddr;
    # unsigned char fRequestBuffer[REQUEST_BUFFER_SIZE];
    # unsigned char fResponseBuffer[RESPONSE_BUFFER_SIZE];
    # unsigned fRequestBytesAlreadySeen, fRequestBufferBytesLeft;
}


class ClientSession {
    + ClientSession(GenericMediaServer& ourServer, u_int32_t sessionId);
    + virtual ~ClientSession();
    + UsageEnvironment& envir() { return fOurServer.envir(); }

    # friend class GenericMediaServer;
    # GenericMediaServer& fOurServer;
    # u_int32_t fOurSessionId;
    # ServerMediaSession* fOurServerMediaSession;
}


class RTSPServer {
    + static RTSPServer* createNew(UsageEnvironment& env, Port ourPort = 554,
    +     UserAuthenticationDatabase* authDatabase = NULL,
    +     unsigned reclamationTestSeconds = 65);
    + static Boolean lookupByName(UsageEnvironment& env, char const* name,
    +     RTSPServer*& resultServer);
    + typedef void(responseHandlerForREGISTER)(RTSPServer* rtspServer, unsigned requestId, int resultCode, char* resultString);
    + unsigned registerStream(ServerMediaSession* serverMediaSession,
    +     char const* remoteClientNameOrAddress, portNumBits remoteClientPortNum,
    +     responseHandlerForREGISTER* responseHandler,
    +     char const* username = NULL, char const* password = NULL,
    +     Boolean receiveOurStreamViaTCP = False,
    +     char const* proxyURLSuffix = NULL);
    + char* rtspURL(ServerMediaSession const* serverMediaSession, int clientSocket = -1) const;
    + char* rtspURLPrefix(int clientSocket = -1) const;
    + UserAuthenticationDatabase* setAuthenticationDatabase(UserAuthenticationDatabase* newDB);
    + void disableStreamingRTPOverTCP();
    + Boolean setUpTunnelingOverHTTP(Port httpPort);
    + portNumBits httpServerPortNum() const; // in host byte order.  (Returns 0 if not present.)
    # RTSPServer(UsageEnvironment& env,
          int ourSocket, Port ourPort,
          UserAuthenticationDatabase* authDatabase,
          unsigned reclamationTestSeconds);
    # virtual ~RTSPServer();
    # virtual char const* allowedCommandNames();
    # virtual Boolean weImplementREGISTER(char const* proxyURLSuffix, char*& responseStr);
    # virtual void implementCmd_REGISTER(char const* url, char const* urlSuffix, int socketToRemoteServer,
          Boolean deliverViaTCP, char const* proxyURLSuffix);
    # virtual UserAuthenticationDatabase* getAuthenticationDatabaseForCommand(char const* cmdName);
    # virtual Boolean specialClientAccessCheck(int clientSocket, struct sockaddr_in& clientAddr,
          char const* urlSuffix);
    # virtual Boolean specialClientUserAccessCheck(int clientSocket, struct sockaddr_in& clientAddr,
        char const* urlSuffix, char const* username);
    - virtual Boolean isRTSPServer() const;
    # virtual ClientConnection* createNewClientConnection(int clientSocket, struct sockaddr_in clientAddr);
    # virtual ClientSession* createNewClientSession(u_int32_t sessionId);
    - static void incomingConnectionHandlerHTTP(void*, int /*mask*/);
    - void incomingConnectionHandlerHTTP();
    - void noteTCPStreamingOnSocket(int socketNum, RTSPClientSession* clientSession, unsigned trackNum);
    - void unnoteTCPStreamingOnSocket(int socketNum, RTSPClientSession* clientSession, unsigned trackNum);
    - void stopTCPStreamingOnSocket(int socketNum);
    - friend class RTSPClientConnection;
    - friend class RTSPClientSession;
    - friend class ServerMediaSessionIterator;
    - friend class RegisterRequestRecord;
    - int fHTTPServerSocket;
    - Port fHTTPServerPort; 
    - HashTable* fClientConnectionsForHTTPTunneling;
    - HashTable* fTCPStreamingDatabase;
    - HashTable* fPendingRegisterRequests;
    - unsigned fRegisterRequestCounter;
    - UserAuthenticationDatabase* fAuthDB;
    - unsigned fReclamationTestSeconds;
    - Boolean fAllowStreamingRTPOverTCP;
}


class RTSPServerWithREGISTERProxying {
    + static RTSPServerWithREGISTERProxying* createNew(UsageEnvironment& env, Port ourPort = 554,
        UserAuthenticationDatabase* authDatabase = NULL,
        UserAuthenticationDatabase* authDatabaseForREGISTER = NULL,
        unsigned reclamationTestSeconds = 65,
        Boolean streamRTPOverTCP = False,
        int verbosityLevelForProxying = 0);

    # RTSPServerWithREGISTERProxying(UsageEnvironment& env, int ourSocket, Port ourPort,
        UserAuthenticationDatabase* authDatabase, UserAuthenticationDatabase* authDatabaseForREGISTER,
        unsigned reclamationTestSeconds,
        Boolean streamRTPOverTCP, int verbosityLevelForProxying);
    # virtual ~RTSPServerWithREGISTERProxying();
    # virtual char const* allowedCommandNames();
    # virtual Boolean weImplementREGISTER(char const* proxyURLSuffix, char*& responseStr);
    # virtual void implementCmd_REGISTER(char const* url, char const* urlSuffix, int socketToRemoteServer,
        Boolean deliverViaTCP, char const* proxyURLSuffix);
    # virtual UserAuthenticationDatabase* getAuthenticationDatabaseForCommand(char const* cmdName);
    - Boolean fStreamRTPOverTCP;
    - int fVerbosityLevelForProxying;
    - unsigned fRegisteredProxyCounter;
    - char* fAllowedCommandNames;
    - UserAuthenticationDatabase* fAuthDBForREGISTER;
}


class RTSPClientConnection {
    # virtual void handleRequestBytes(int newBytesRead);
    # RTSPClientConnection(RTSPServer& ourServer, int clientSocket, struct sockaddr_in clientAddr);
    # virtual ~RTSPClientConnection();
    # friend class RTSPServer;
    # virtual void handleCmd_OPTIONS();
    # virtual void handleCmd_GET_PARAMETER(char const* fullRequestStr);
    # virtual void handleCmd_SET_PARAMETER(char const* fullRequestStr);
    # virtual void handleCmd_DESCRIBE(char const* urlPreSuffix, char const* urlSuffix, char const* fullRequestStr);
    # virtual void handleCmd_REGISTER(char const* url, char const* urlSuffix, char const* fullRequestStr,
    #     Boolean reuseConnection, Boolean deliverViaTCP, char const* proxyURLSuffix);
    # virtual void handleCmd_bad();
    # virtual void handleCmd_notSupported();
    # virtual void handleCmd_notFound();
    # virtual void handleCmd_sessionNotFound();
    # virtual void handleCmd_unsupportedTransport();
    # virtual Boolean parseHTTPRequestString(char* resultCmdName, unsigned resultCmdNameMaxSize,
    #     char* urlSuffix, unsigned urlSuffixMaxSize,
    #     char* sessionCookie, unsigned sessionCookieMaxSize,
    #     char* acceptStr, unsigned acceptStrMaxSize);
    # virtual void handleHTTPCmd_notSupported();
    # virtual void handleHTTPCmd_notFound();
    # virtual void handleHTTPCmd_OPTIONS();
    # virtual void handleHTTPCmd_TunnelingGET(char const* sessionCookie);
    # virtual Boolean handleHTTPCmd_TunnelingPOST(char const* sessionCookie, unsigned char const* extraData, unsigned extraDataSize);
    # virtual void handleHTTPCmd_StreamingGET(char const* urlSuffix, char const* fullRequestStr);
    # void resetRequestBuffer();
    # void closeSockets();
    # static void handleAlternativeRequestByte(void*, u_int8_t requestByte);
    # void handleAlternativeRequestByte1(u_int8_t requestByte);
    # Boolean authenticationOK(char const* cmdName, char const* urlSuffix, char const* fullRequestStr);
    # void changeClientInputSocket(int newSocketNum, unsigned char const* extraData, unsigned extraDataSize);
    # static void continueHandlingREGISTER(ParamsForREGISTER* params);
    # virtual void continueHandlingREGISTER1(ParamsForREGISTER* params);
    # void setRTSPResponse(char const* responseStr);
    # void setRTSPResponse(char const* responseStr, u_int32_t sessionId);
    # void setRTSPResponse(char const* responseStr, char const* contentStr);
    # void setRTSPResponse(char const* responseStr, u_int32_t sessionId, char const* contentStr);
    # RTSPServer& fOurRTSPServer;
    # int& fClientInputSocket;
    # int fClientOutputSocket;
    # Boolean fIsActive;
    # unsigned char* fLastCRLF;
    # unsigned fRecursionCount;
    # char const* fCurrentCSeq;
    # Authenticator fCurrentAuthenticator;
    # char* fOurSessionCookie;
    # unsigned fBase64RemainderCount;
}


class RTSPClientSession {
    # RTSPClientSession(RTSPServer& ourServer, u_int32_t sessionId);
    # virtual ~RTSPClientSession();
    # friend class RTSPServer;
    # virtual void handleCmd_SETUP(RTSPClientConnection* ourClientConnection,
         char const* urlPreSuffix, char const* urlSuffix, char const* fullRequestStr);
    # virtual void handleCmd_withinSession(RTSPClientConnection* ourClientConnection,
         char const* cmdName,
         char const* urlPreSuffix, char const* urlSuffix,
         char const* fullRequestStr);
    # virtual void handleCmd_TEARDOWN(RTSPClientConnection* ourClientConnection,
         ServerMediaSubsession* subsession);
    # virtual void handleCmd_PLAY(RTSPClientConnection* ourClientConnection,
         ServerMediaSubsession* subsession, char const* fullRequestStr);
    # virtual void handleCmd_PAUSE(RTSPClientConnection* ourClientConnection,
         ServerMediaSubsession* subsession);
    # virtual void handleCmd_GET_PARAMETER(RTSPClientConnection* ourClientConnection,
         ServerMediaSubsession* subsession, char const* fullRequestStr);
    # virtual void handleCmd_SET_PARAMETER(RTSPClientConnection* ourClientConnection,
         ServerMediaSubsession* subsession, char const* fullRequestStr);
    # void deleteStreamByTrack(unsigned trackNum);
    # void reclaimStreamStates();
    # Boolean isMulticast();
    # void noteLiveness();
    # static void noteClientLiveness(RTSPClientSession* clientSession);
    # static void livenessTimeoutTask(RTSPClientSession* clientSession);
    # void setRTSPResponse(RTSPClientConnection* ourClientConnection, char const* responseStr);
    # void setRTSPResponse(RTSPClientConnection* ourClientConnection, char const* responseStr, u_int32_t sessionId);
    # void setRTSPResponse(RTSPClientConnection* ourClientConnection, char const* responseStr, char const* contentStr);
    # RTSPServer& fOurRTSPServer;
    # Boolean fIsMulticast, fStreamAfterSETUP;
    # unsigned char fTCPStreamIdCount;
    # Boolean usesTCPTransport() const;
    # TaskToken fLivenessCheckTask;
    # unsigned fNumStreamStates;
}


class streamState {
    ServerMediaSubsession* subsession;
    int tcpSocketNum;
    void* streamToken;
}


class ServerMediaSessionIterator {
    + ServerMediaSessionIterator(RTSPServer& server);
    + virtual ~ServerMediaSessionIterator();
    + ServerMediaSession* next();
    - HashTable::Iterator* fOurIterator;
}


class ParamsForREGISTER {
    + ParamsForREGISTER(RTSPClientConnection* ourConnection, char const* url, char const* urlSuffix,
        Boolean reuseConnection, Boolean deliverViaTCP, char const* proxyURLSuffix);
    + virtual ~ParamsForREGISTER();
    - friend class RTSPClientConnection;
    - RTSPClientConnection* fOurConnection;
    - char* fURL;
    - char* fURLSuffix;
    - Boolean fReuseConnection, fDeliverViaTCP;
    - char* fProxyURLSuffix;
}


class RTSPServerSupportingHTTPStreaming {
    + static RTSPServerSupportingHTTPStreaming* createNew(UsageEnvironment& env, Port rtspPort = 554,
        UserAuthenticationDatabase* authDatabase = NULL,
        unsigned reclamationTestSeconds = 65);

    + Boolean setHTTPPort(Port httpPort) { return setUpTunnelingOverHTTP(httpPort); }
    # RTSPServerSupportingHTTPStreaming(UsageEnvironment& env,
        int ourSocket, Port ourPort,
        UserAuthenticationDatabase* authDatabase,
        unsigned reclamationTestSeconds);
    # virtual ~RTSPServerSupportingHTTPStreaming();
    # virtual RTSPClientConnection* createNewClientConnection(int clientSocket, struct sockaddr_in clientAddr);
}


class RTSPClientConnectionSupportingHTTPStreaming {
    + RTSPClientConnectionSupportingHTTPStreaming(RTSPServer& ourServer, int clientSocket, struct sockaddr_in clientAddr);
    + virtual ~RTSPClientConnectionSupportingHTTPStreaming();
    # virtual void handleHTTPCmd_StreamingGET(char const* urlSuffix, char const* fullRequestStr);
    # static void afterStreaming(void* clientData);
    - u_int32_t fClientSessionId;
    - FramedSource* fStreamSource;
    - ByteStreamMemoryBufferSource* fPlaylistSource;
    - TCPStreamSink* fTCPSink;
}


class DynamicRTSPServer {
    + static DynamicRTSPServer* createNew(UsageEnvironment& env, Port ourPort,
        UserAuthenticationDatabase* authDatabase,
        unsigned reclamationTestSeconds = 65);
    # DynamicRTSPServer(UsageEnvironment& env, int ourSocket, Port ourPort,
        UserAuthenticationDatabase* authDatabase, unsigned reclamationTestSeconds);
    # virtual ~DynamicRTSPServer();
    # virtual ServerMediaSession*
    # lookupServerMediaSession(char const* streamName, Boolean isFirstLookupInSession);
}


Medium <|.. GenericMediaServer
GenericMediaServer +- -> ClientConnection
GenericMediaServer +- -> ClientSession
ClientConnection - -> GenericMediaServer
ClientSession - -> GenericMediaServer
GenericMediaServer <|.. RTSPServer
RTSPServer - -> RTSPClientConnection
RTSPServer - -> RTSPClientSession
RTSPServer - -> ServerMediaSessionIterator
RTSPServer - -> RegisterRequestRecord
RTSPServer <|- - RTSPServerWithREGISTERProxying
RTSPServer +- -> RTSPClientConnection
RTSPClientConnection - -> RTSPServer
ClientConnection <|- - RTSPClientConnection
RTSPServer +- -> RTSPClientSession
ClientSession <|- - RTSPClientSession
RTSPClientSession +- -> streamState
RTSPServer +- -> ServerMediaSessionIterator
RTSPClientConnection +- -> ParamsForREGISTER
ParamsForREGISTER - -> RTSPClientConnection
RTSPServer <|- - RTSPServerSupportingHTTPStreaming
RTSPServerSupportingHTTPStreaming +- -> RTSPClientConnectionSupportingHTTPStreaming
RTSPClientConnection <|- - RTSPClientConnectionSupportingHTTPStreaming
RTSPServerSupportingHTTPStreaming <|- - DynamicRTSPServer

@enduml

PlantUML version 1.2018.00(Fri Jan 05 03:42:56 CST 2018)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_131-b11
Operating System: Windows 10
OS Version: 10.0
Default Encoding: GBK
Language: zh
Country: CN
--></g></svg>